{"version":3,"file":"input.cjs.js","sources":["../../../src/components/input/input.tsx"],"sourcesContent":["import React, {\n\tuseState,\n\tuseCallback,\n\tuseMemo,\n\tforwardRef,\n\tuseRef,\n\ttype ReactNode,\n\tLabelHTMLAttributes,\n} from 'react';\nimport { nanoid } from 'nanoid';\nimport { cn } from '@/utilities/functions';\nimport { Upload, X } from 'lucide-react';\nimport Label from '../label';\nimport { mergeRefs } from '@/components/toaster/utils';\n\nexport declare interface InputProps {\n\t/** Unique identifier for the input element. */\n\tid?: string;\n\n\t/** Specifies the type of the input element (e.g., text, file). */\n\ttype?: 'text' | 'password' | 'email' | 'file';\n\n\t/** Initial value of the input element. */\n\tdefaultValue?: string;\n\n\t/** Controlled value of the input element. */\n\tvalue?: string;\n\n\t/** Defines the size of the input (e.g., 'sm', 'md', 'lg'). */\n\tsize?: 'sm' | 'md' | 'lg';\n\n\t/** Additional custom classes for styling. */\n\tclassName?: string;\n\n\t/** Disables the input element when true. */\n\tdisabled?: boolean;\n\n\t/** Function called when the input value changes. */\n\tonChange?: ( value: string | FileList | null ) => void;\n\n\t/** Indicates whether the input has an error state. */\n\terror?: boolean;\n\n\t/** Function called when the input encounters an error. */\n\tonError?: () => void;\n\n\t/** React node displayed as a prefix inside the input. */\n\tprefix?: ReactNode;\n\n\t/** React node displayed as a suffix inside the input. */\n\tsuffix?: ReactNode;\n\n\t/** Label displayed above the input field. */\n\tlabel?: string;\n\n\t/** Placeholder text for the input field. */\n\tplaceholder?: string;\n\n\t/** Indicates whether the input is required. */\n\trequired?: boolean;\n}\n\nexport const InputComponent = (\n\t{\n\t\tid,\n\t\ttype = 'text',\n\t\tdefaultValue = '',\n\t\tvalue,\n\t\tsize = 'sm', // sm, md, lg\n\t\tclassName = '',\n\t\tdisabled = false,\n\t\tonChange = () => {},\n\t\terror = false,\n\t\tonError = () => {},\n\t\tprefix = null,\n\t\tsuffix = null,\n\t\tlabel = '',\n\t\t...props\n\t}: InputProps &\n\t\tOmit<\n\t\t\tReact.InputHTMLAttributes<HTMLInputElement>,\n\t\t\t'size' | 'prefix' | 'onChange'\n\t\t>,\n\tref: React.ForwardedRef<HTMLInputElement>\n) => {\n\tconst inputRef = useRef<HTMLInputElement>( null );\n\tconst inputId = useMemo( () => id || `input-${ type }-${ nanoid() }`, [ id ] );\n\tconst isControlled = useMemo( () => typeof value !== 'undefined', [ value ] );\n\tconst [ inputValue, setInputValue ] = useState<string>( defaultValue );\n\tconst [ selectedFile, setSelectedFile ] = useState<string | null>( null );\n\n\tconst getValue = useCallback(\n\t\t() => ( isControlled ? value : inputValue ),\n\t\t[ isControlled, value, inputValue ]\n\t);\n\n\tconst handleChange = ( event: React.ChangeEvent<HTMLInputElement> ) => {\n\t\tif ( disabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet newValue: FileList | string | null;\n\t\tif ( type === 'file' ) {\n\t\t\tnewValue = event.target.files;\n\t\t\tif ( newValue && newValue.length > 0 ) {\n\t\t\t\tsetSelectedFile( newValue[ 0 ].name );\n\t\t\t} else {\n\t\t\t\tsetSelectedFile( null );\n\t\t\t}\n\t\t} else {\n\t\t\tnewValue = event.target.value;\n\t\t}\n\n\t\tif ( ! isControlled && type !== 'file' ) {\n\t\t\tsetInputValue( newValue as string );\n\t\t}\n\n\t\tif ( typeof onChange !== 'function' ) {\n\t\t\treturn;\n\t\t}\n\t\tonChange( newValue );\n\t};\n\n\tconst handleReset = () => {\n\t\t// Reset file selection when \"X\" icon is clicked\n\t\tsetSelectedFile( null );\n\t\tif ( inputRef.current ) {\n\t\t\tinputRef.current.value = '';\n\t\t}\n\t\tonChange( null );\n\t};\n\n\tconst baseClasses =\n\t\t'bg-field-secondary-background font-normal placeholder-text-tertiary text-text-primary w-full outline outline-1 outline-border-subtle border-none transition-[color,box-shadow,outline] duration-200';\n\tconst sizeClasses = {\n\t\txs: 'px-2 py-1 rounded',\n\t\tsm: 'p-3 py-2 rounded',\n\t\tmd: 'p-3.5 py-2.5 rounded-md',\n\t\tlg: 'p-4 py-3 rounded-lg',\n\t};\n\tconst labelClasses = {\n\t\txs: 'text-xs font-medium',\n\t\tsm: 'text-sm font-medium',\n\t\tmd: 'text-sm font-medium',\n\t\tlg: 'text-base font-medium',\n\t};\n\tconst textClasses = {\n\t\txs: 'text-xs',\n\t\tsm: 'text-xs',\n\t\tmd: 'text-sm',\n\t\tlg: 'text-base',\n\t};\n\tconst sizeClassesWithPrefix = {\n\t\tsm: prefix ? 'pl-8' : '',\n\t\tmd: prefix ? 'pl-9' : '',\n\t\tlg: prefix ? 'pl-10' : '',\n\t};\n\tconst sizeClassesWithSuffix = {\n\t\tsm: suffix ? 'pr-8' : '',\n\t\tmd: suffix ? 'pr-9' : '',\n\t\tlg: suffix ? 'pr-10' : '',\n\t};\n\n\tconst hoverClasses = disabled\n\t\t? 'hover:outline-border-disabled'\n\t\t: 'hover:outline-border-strong';\n\tconst focusClasses =\n\t\t'focus:outline-focus-border focus:ring-2 focus:ring-toggle-on focus:ring-offset-2';\n\tconst errorClasses = error\n\t\t? 'focus:outline-focus-error-border focus:ring-field-color-error outline-focus-error-border'\n\t\t: '';\n\tconst errorFileClasses = error\n\t\t? 'focus:outline-focus-error-border focus:ring-field-color-error outline-focus-error-border'\n\t\t: '';\n\tconst disabledClasses = disabled\n\t\t? 'outline-border-disabled bg-field-background-disabled cursor-not-allowed text-text-disabled'\n\t\t: '';\n\tconst disabledUploadFileClasses = disabled\n\t\t? 'outline-border-disabled cursor-not-allowed text-text-disabled file:text-text-tertiary'\n\t\t: '';\n\tconst iconClasses =\n\t\t'font-normal placeholder-text-tertiary text-text-primary pointer-events-none absolute inset-y-0 flex flex-1 items-center [&>svg]:h-4 [&>svg]:w-4';\n\tconst uploadIconClasses = disabled\n\t\t? 'font-normal placeholder-text-tertiary text-icon-disabled pointer-events-none absolute inset-y-0 flex flex-1 items-center'\n\t\t: 'font-normal placeholder-text-tertiary text-field-placeholder pointer-events-none absolute inset-y-0 flex flex-1 items-center';\n\n\tconst uploadIconSizeClasses = {\n\t\txs: '[&>svg]:size-4',\n\t\tsm: '[&>svg]:size-4',\n\t\tmd: '[&>svg]:size-5',\n\t\tlg: '[&>svg]:size-6',\n\t};\n\n\tconst getPrefix = () => {\n\t\tif ( ! prefix ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<div className={ cn( iconClasses, 'left-0 pl-3', textClasses[ size ] ) }>\n\t\t\t\t{ prefix }\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst getSuffix = () => {\n\t\tif ( type === 'file' ) {\n\t\t\tif ( selectedFile ) {\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\t\tuploadIconClasses,\n\t\t\t\t\t\t\t'right-0 pr-3 cursor-pointer z-20 pointer-events-auto',\n\t\t\t\t\t\t\tuploadIconSizeClasses[ size ]\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tonClick={ handleReset }\n\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\ttabIndex={ 0 }\n\t\t\t\t\t\tonKeyDown={ ( e ) => {\n\t\t\t\t\t\t\tif ( e.key === 'Enter' || e.key === ' ' ) {\n\t\t\t\t\t\t\t\thandleReset();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<X />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\tuploadIconClasses,\n\t\t\t\t\t\t'right-0 pr-3',\n\t\t\t\t\t\tuploadIconSizeClasses[ size ]\n\t\t\t\t\t) }\n\t\t\t\t>\n\t\t\t\t\t<Upload />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tif ( ! suffix ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={ cn( iconClasses, 'right-0 pr-3', textClasses[ size ] ) }>\n\t\t\t\t{ suffix }\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst renderLabel = useMemo( () => {\n\t\tif ( ! label ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<Label<LabelHTMLAttributes<HTMLLabelElement>>\n\t\t\t\tclassName={ cn( labelClasses[ size ] ) }\n\t\t\t\thtmlFor={ inputId }\n\t\t\t\t{ ...( props?.required && { required: true } ) }\n\t\t\t>\n\t\t\t\t{ label }\n\t\t\t</Label>\n\t\t);\n\t}, [ label, size, inputId ] );\n\n\tconst fileClasses = selectedFile\n\t\t? 'file:border-0 file:bg-transparent pr-10'\n\t\t: 'text-text-tertiary file:border-0 file:bg-transparent pr-10';\n\n\tif ( type === 'file' ) {\n\t\treturn (\n\t\t\t<div className=\"flex flex-col items-start gap-1.5 [&_*]:box-border box-border\">\n\t\t\t\t{ renderLabel }\n\t\t\t\t<div\n\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\t'w-full relative flex focus-within:z-10',\n\t\t\t\t\t\tclassName\n\t\t\t\t\t) }\n\t\t\t\t>\n\t\t\t\t\t<input\n\t\t\t\t\t\tref={ mergeRefs( inputRef, ref ) }\n\t\t\t\t\t\tid={ inputId }\n\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\t\tbaseClasses,\n\t\t\t\t\t\t\tdisabledUploadFileClasses,\n\t\t\t\t\t\t\tsizeClasses[ size ],\n\t\t\t\t\t\t\ttextClasses[ size ],\n\t\t\t\t\t\t\tfocusClasses,\n\t\t\t\t\t\t\thoverClasses,\n\t\t\t\t\t\t\terrorFileClasses,\n\t\t\t\t\t\t\tfileClasses\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tdisabled={ disabled }\n\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\tonInvalid={ onError }\n\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t/>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\t\tuploadIconClasses,\n\t\t\t\t\t\t\t'right-0 pr-3',\n\t\t\t\t\t\t\tuploadIconSizeClasses[ size ]\n\t\t\t\t\t\t) }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Upload />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"flex flex-col items-start gap-1.5 [&_*]:box-border box-border\">\n\t\t\t{ renderLabel }\n\t\t\t<div\n\t\t\t\tclassName={ cn(\n\t\t\t\t\t'w-full relative flex focus-within:z-10',\n\t\t\t\t\tclassName\n\t\t\t\t) }\n\t\t\t>\n\t\t\t\t{ getPrefix() }\n\t\t\t\t<input\n\t\t\t\t\tref={ mergeRefs( inputRef, ref ) }\n\t\t\t\t\tid={ inputId }\n\t\t\t\t\ttype={ type }\n\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\tbaseClasses,\n\t\t\t\t\t\tdisabledClasses,\n\t\t\t\t\t\tsizeClasses[ size ],\n\t\t\t\t\t\ttextClasses[ size ],\n\t\t\t\t\t\tsizeClassesWithPrefix[ size ],\n\t\t\t\t\t\tsizeClassesWithSuffix[ size ],\n\t\t\t\t\t\tfocusClasses,\n\t\t\t\t\t\thoverClasses,\n\t\t\t\t\t\terrorClasses\n\t\t\t\t\t) }\n\t\t\t\t\tdisabled={ disabled }\n\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\tonInvalid={ onError }\n\t\t\t\t\tvalue={ getValue() }\n\t\t\t\t\t{ ...props }\n\t\t\t\t/>\n\t\t\t\t{ getSuffix() }\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nconst Input = forwardRef( InputComponent );\nInput.displayName = 'Input';\n\nexport default Input;\n"],"names":["InputComponent","id","type","defaultValue","value","size","className","disabled","onChange","error","onError","prefix","suffix","label","props","ref","inputRef","useRef","inputId","useMemo","nanoid","isControlled","inputValue","setInputValue","useState","selectedFile","setSelectedFile","getValue","useCallback","handleChange","event","newValue","handleReset","baseClasses","sizeClasses","labelClasses","textClasses","sizeClassesWithPrefix","sizeClassesWithSuffix","hoverClasses","focusClasses","errorClasses","errorFileClasses","disabledClasses","disabledUploadFileClasses","iconClasses","uploadIconClasses","uploadIconSizeClasses","getPrefix","jsx","cn","getSuffix","e","X","Upload","renderLabel","Label","fileClasses","jsxs","mergeRefs","Input","forwardRef"],"mappings":"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"}