{"version":3,"file":"select.cjs.js","sources":["../../../src/components/select/select.tsx"],"sourcesContent":["import {\n\tuseState,\n\tuseCallback,\n\tuseMemo,\n\tuseRef,\n\tcreateContext,\n\tuseContext,\n\tChildren,\n\tcloneElement,\n\tisValidElement,\n\tuseEffect,\n\tuseLayoutEffect,\n\tFragment,\n\tforwardRef,\n\ttype ReactNode,\n} from 'react';\nimport { cn } from '@/utilities/functions';\nimport { CheckIcon, ChevronDown, ChevronsUpDown, Search } from 'lucide-react';\nimport {\n\tuseFloating,\n\tuseClick,\n\tuseDismiss,\n\tuseRole,\n\tuseListNavigation,\n\tuseInteractions,\n\tFloatingFocusManager,\n\tuseTypeahead,\n\toffset,\n\tflip,\n\tsize,\n\tautoUpdate,\n\tFloatingPortal,\n} from '@floating-ui/react';\nimport { Badge, Loader } from '@/components';\nimport { nanoid } from 'nanoid';\nimport { mergeRefs } from '@/components/toaster/utils';\nimport {\n\tdisabledClassNames,\n\toptionGroupDividerClassNames,\n\toptionGroupDividerSizeClassNames,\n\tselectItemClassNames,\n\tsizeClassNames,\n} from './component-style';\nimport type {\n\tOnClick,\n\tOnKeyDown,\n\tSelectButtonProps,\n\tSelectContextValue,\n\tSelectGetValues,\n\tSelectOptionProps,\n\tSelectOptionsProps,\n\tSelectOptionValue,\n\tSelectPortalProps,\n\tSelectProps,\n\tSelectSizes,\n\tSelectOptionGroupProps,\n} from './select-types';\nimport { getTextContent } from './utils';\nimport { useDebouncedCallback } from '@/utilities/hooks';\n\n// Context to manage the state of the select component.\nconst SelectContext = createContext<SelectContextValue>(\n\t{} as SelectContextValue\n);\nconst useSelectContext = () => useContext( SelectContext );\n\nexport const SelectButton = forwardRef<HTMLButtonElement, SelectButtonProps>( ( {\n\tchildren,\n\ticon = null, // Icon to show in the select button.\n\tplaceholder = 'Select an option', // Placeholder text.\n\toptionIcon = null, // Icon to show in the selected option.\n\trender,\n\tlabel, // Label for the select component.\n\tclassName,\n\t...props\n}: SelectButtonProps, ref ) => {\n\tconst {\n\t\tsizeValue,\n\t\tgetReferenceProps,\n\t\tgetValues,\n\t\tselectId,\n\t\trefs,\n\t\tisOpen,\n\t\tmultiple,\n\t\tcombobox,\n\t\tsetSelected,\n\t\tonChange,\n\t\tisControlled,\n\t\tdisabled,\n\t\tby,\n\t} = useSelectContext();\n\n\tconst badgeSize = {\n\t\tsm: 'xs',\n\t\tmd: 'sm',\n\t\tlg: 'md',\n\t}?.[ sizeValue as SelectSizes ];\n\n\t// Get icon based on the Select component type and user provided icon.\n\tconst getIcon = useCallback( () => {\n\t\tif ( icon ) {\n\t\t\treturn icon;\n\t\t}\n\n\t\tconst iconClassNames =\n\t\t\t'text-field-placeholder ' + disabledClassNames.icon;\n\n\t\treturn combobox ? (\n\t\t\t<ChevronsUpDown className={ iconClassNames } />\n\t\t) : (\n\t\t\t<ChevronDown className={ iconClassNames } />\n\t\t);\n\t}, [ icon ] );\n\n\tconst renderSelected = useCallback( () => {\n\t\tconst selectedValue = getValues();\n\n\t\tif ( ! selectedValue ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( multiple ) {\n\t\t\treturn ( selectedValue as SelectOptionValue[] ).map(\n\t\t\t\t( valueItem: SelectOptionValue, index: number ) => (\n\t\t\t\t\t<Badge\n\t\t\t\t\t\tclassName=\"cursor-default\"\n\t\t\t\t\t\ticon={ optionIcon }\n\t\t\t\t\t\ttype=\"rounded\"\n\t\t\t\t\t\tkey={ index }\n\t\t\t\t\t\tsize={ badgeSize as SelectSizes }\n\t\t\t\t\t\tonMouseDown={ handleOnCloseItem( valueItem ) }\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\ttypeof render === 'function'\n\t\t\t\t\t\t\t\t? render( valueItem as SelectOptionValue )\n\t\t\t\t\t\t\t\t: valueItem.toString()\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclosable={ true }\n\t\t\t\t\t\tdisabled={ disabled }\n\t\t\t\t\t/>\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\tlet renderValue: ReactNode =\n\t\t\ttypeof selectedValue === 'string' ? selectedValue : '';\n\n\t\tif ( typeof render === 'function' ) {\n\t\t\trenderValue = render( selectedValue as SelectOptionValue );\n\t\t}\n\n\t\tif ( typeof children === 'function' && typeof render !== 'function' ) {\n\t\t\tconst childProps = {\n\t\t\t\tvalue: selectedValue as SelectOptionValue,\n\t\t\t\t...( multiple\n\t\t\t\t\t? {\n\t\t\t\t\t\tonClose: handleOnCloseItem(\n\t\t\t\t\t\t\t\tselectedValue as SelectOptionValue\n\t\t\t\t\t\t),\n\t\t\t\t\t}\n\t\t\t\t\t: {} ),\n\t\t\t};\n\t\t\trenderValue = children( childProps );\n\t\t}\n\n\t\tif (\n\t\t\t( isValidElement( children ) || typeof children === 'string' ) &&\n\t\t\ttypeof render !== 'function'\n\t\t) {\n\t\t\trenderValue = children;\n\t\t}\n\n\t\treturn (\n\t\t\t<span\n\t\t\t\tclassName={ cn(\n\t\t\t\t\t'truncate',\n\t\t\t\t\tsizeClassNames[ sizeValue as SelectSizes ].displaySelected,\n\t\t\t\t\tdisabledClassNames.text\n\t\t\t\t) }\n\t\t\t>\n\t\t\t\t{ renderValue as React.ReactNode }\n\t\t\t</span>\n\t\t);\n\t}, [ getValues, disabled ] );\n\n\tconst handleOnCloseItem =\n\t\t( value: SelectOptionValue ) =>\n\t\t\t( event?: React.MouseEvent<HTMLElement> ) => {\n\t\t\t\tevent?.preventDefault();\n\t\t\t\tevent?.stopPropagation();\n\n\t\t\t\tconst selectedValues = [\n\t\t\t\t\t...( ( getValues() as SelectOptionValue[] ) ?? [] ),\n\t\t\t\t];\n\t\t\t\tconst selectedIndex = selectedValues.findIndex( ( val ) => {\n\t\t\t\t\tif ( val !== null && value !== null && typeof val === 'object' ) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t( val as Record<string, unknown> )[ by ] ===\n\t\t\t\t\t\t( value as Record<string, unknown> )[ by ]\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn val === value;\n\t\t\t\t} );\n\n\t\t\t\tif ( selectedIndex === -1 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tselectedValues.splice( selectedIndex, 1 );\n\n\t\t\t\tif ( ! isControlled ) {\n\t\t\t\t\tsetSelected( selectedValues );\n\t\t\t\t}\n\t\t\t\tif ( typeof onChange === 'function' ) {\n\t\t\t\t\tonChange( selectedValues );\n\t\t\t\t}\n\t\t\t};\n\n\treturn (\n\t\t<div className=\"w-full flex flex-col items-start gap-1.5 [&_*]:box-border box-border\">\n\t\t\t{ !! label && (\n\t\t\t\t<label\n\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\tsizeClassNames[ sizeValue as SelectSizes ]?.label,\n\t\t\t\t\t\t'text-field-label'\n\t\t\t\t\t) }\n\t\t\t\t\thtmlFor={ selectId }\n\t\t\t\t>\n\t\t\t\t\t{ label }\n\t\t\t\t</label>\n\t\t\t) }\n\t\t\t<button\n\t\t\t\tid={ selectId }\n\t\t\t\tref={ mergeRefs( refs.setReference, ref ) }\n\t\t\t\tclassName={ cn(\n\t\t\t\t\t'flex items-center justify-between w-full box-border transition-[outline,background-color,color,box-shadow] duration-200 bg-white',\n\t\t\t\t\t'outline outline-1 outline-field-border border-none cursor-pointer',\n\t\t\t\t\t! isOpen &&\n\t\t\t\t\t\t'focus:ring-2 focus:ring-offset-2 focus:outline-focus-border focus:ring-focus [&:hover:not(:focus):not(:disabled)]:outline-border-strong',\n\t\t\t\t\tsizeClassNames[ sizeValue as SelectSizes ].selectButton,\n\t\t\t\t\tmultiple &&\n\t\t\t\t\t\tsizeClassNames[ sizeValue as SelectSizes ].multiSelect,\n\t\t\t\t\tdisabledClassNames.selectButton,\n\t\t\t\t\tclassName\n\t\t\t\t) }\n\t\t\t\ttabIndex={ 0 }\n\t\t\t\tdisabled={ disabled }\n\t\t\t\t{ ...props }\n\t\t\t\t{ ...getReferenceProps() }\n\t\t\t>\n\t\t\t\t{ /* Input and selected item container */ }\n\t\t\t\t<div\n\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\t'flex-1 grid items-center justify-start gap-1.5 overflow-hidden',\n\t\t\t\t\t\tgetValues() && 'flex flex-wrap'\n\t\t\t\t\t) }\n\t\t\t\t>\n\t\t\t\t\t{ /* Show Selected item/items (Multi-selector) */ }\n\t\t\t\t\t{ renderSelected() }\n\n\t\t\t\t\t{ /* Placeholder */ }\n\t\t\t\t\t{ ( multiple\n\t\t\t\t\t\t? ! ( getValues() as SelectOptionValue[] )?.length\n\t\t\t\t\t\t: ! getValues() ) && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\t\t\t'[grid-area:1/1/2/3] text-field-input px-1',\n\t\t\t\t\t\t\t\tsizeClassNames[ sizeValue as SelectSizes ]\n\t\t\t\t\t\t\t\t\t.displaySelected,\n\t\t\t\t\t\t\t\tdisabledClassNames.text\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ placeholder }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t\t{ /* Suffix Icon */ }\n\t\t\t\t<div\n\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\t'flex items-center [&>svg]:shrink-0',\n\t\t\t\t\t\tsizeClassNames[ sizeValue as SelectSizes ].icon\n\t\t\t\t\t) }\n\t\t\t\t>\n\t\t\t\t\t{ getIcon() }\n\t\t\t\t</div>\n\t\t\t</button>\n\t\t</div>\n\t);\n} );\n\nexport function SelectOptionGroup( {\n\tlabel,\n\tchildren,\n\tclassName,\n\t...props\n}: SelectOptionGroupProps ) {\n\tconst { index, totalGroups } = props as {\n\t\tindex: number;\n\t\ttotalGroups: number;\n\t};\n\tconst { sizeValue } = useSelectContext();\n\n\tconst groupClassNames = {\n\t\tsm: 'text-xs',\n\t\tmd: 'text-xs',\n\t\tlg: 'text-sm',\n\t};\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<div className=\"flex flex-col\" role=\"group\" aria-label={ label }>\n\t\t\t\t<div\n\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\t'p-2 font-normal text-text-tertiary',\n\t\t\t\t\t\tgroupClassNames[ sizeValue as SelectSizes ],\n\t\t\t\t\t\tclassName\n\t\t\t\t\t) }\n\t\t\t\t\tid={ `group-${ label?.toLowerCase().replace( /\\s+/g, '-' ) }` }\n\t\t\t\t>\n\t\t\t\t\t{ label }\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"flex flex-col\"\n\t\t\t\t\trole=\"presentation\"\n\t\t\t\t\taria-labelledby={ `group-${ label?.toLowerCase().replace( /\\s+/g, '-' ) }` }\n\t\t\t\t>\n\t\t\t\t\t{ children }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{ index < totalGroups &&\n\t\t\t\t!! ( children && Children.count( children ) > 0 ) && (\n\t\t\t\t<hr\n\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\toptionGroupDividerClassNames,\n\t\t\t\t\t\toptionGroupDividerSizeClassNames[\n\t\t\t\t\t\t\t\tsizeValue as SelectSizes\n\t\t\t\t\t\t]\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</Fragment>\n\t);\n}\n\nexport function SelectOptions( {\n\tchildren,\n\tclassName, // Additional class name for the dropdown.\n}: SelectOptionsProps ) {\n\tconst {\n\t\tisOpen,\n\t\tcontext,\n\t\trefs,\n\t\tcombobox,\n\t\tfloatingStyles,\n\t\tgetFloatingProps,\n\t\tsizeValue,\n\t\tsetSearchKeyword,\n\t\tsetActiveIndex,\n\t\tsetSelectedIndex,\n\t\tvalue,\n\t\tselected,\n\t\tgetValues,\n\t\tsearchKeyword,\n\t\tlistContentRef,\n\t\tby,\n\t\tsearchPlaceholder,\n\t\tactiveIndex,\n\t\tsearchFn,\n\t\tdebounceDelay,\n\t} = useSelectContext();\n\n\tconst initialSelectedValueIndex = useMemo( () => {\n\t\tconst currentValue = getValues();\n\t\tlet indexValue = -1;\n\n\t\tif ( currentValue ) {\n\t\t\t// Get all children as an array\n\t\t\tlet allChildren = Children.toArray( children );\n\n\t\t\t// If it's an option group, flatten the children\n\t\t\tif (\n\t\t\t\tallChildren.length > 0 &&\n\t\t\t\tisValidElement( allChildren[ 0 ] ) &&\n\t\t\t\tallChildren[ 0 ].type === SelectOptionGroup\n\t\t\t) {\n\t\t\t\tallChildren = Children.toArray( children )\n\t\t\t\t\t.map( ( group ) =>\n\t\t\t\t\t\tisValidElement( group )\n\t\t\t\t\t\t\t? Children.toArray( group.props.children )\n\t\t\t\t\t\t\t: []\n\t\t\t\t\t)\n\t\t\t\t\t.flat();\n\t\t\t}\n\n\t\t\tindexValue = allChildren.findIndex( ( child: React.ReactNode ) => {\n\t\t\t\tif ( ! isValidElement( child ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tconst childValue = child.props.value;\n\n\t\t\t\tif (\n\t\t\t\t\ttypeof childValue === 'object' &&\n\t\t\t\t\ttypeof currentValue === 'object'\n\t\t\t\t) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\tchildValue[ by ] ===\n\t\t\t\t\t\t( currentValue as Record<string, unknown> )[ by ]\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// For non-object values, do a direct comparison\n\t\t\t\treturn childValue === currentValue;\n\t\t\t} );\n\t\t}\n\n\t\treturn indexValue;\n\t}, [ value, selected, children, by ] );\n\n\t// Initialize active and selected index.\n\tuseLayoutEffect( () => {\n\t\tif ( isOpen ) {\n\t\t\treturn;\n\t\t}\n\t\tsetActiveIndex( initialSelectedValueIndex );\n\t\tsetSelectedIndex( initialSelectedValueIndex );\n\t}, [ initialSelectedValueIndex, isOpen ] );\n\n\t// Reset active index when search keyword changes.\n\tuseLayoutEffect( () => {\n\t\tif ( ! isOpen ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( combobox && [ -1, null ].includes( activeIndex ) ) {\n\t\t\treturn;\n\t\t}\n\t\tsetActiveIndex( -1 );\n\t}, [ searchKeyword, isOpen ] );\n\n\t// Render children based on the search keyword.\n\tconst renderChildren = useMemo( () => {\n\t\t// Track actual visible groups after filtering\n\t\tlet visibleGroups = 0;\n\t\tlet totalGroups = 0;\n\n\t\t// First pass - count total visible groups\n\t\tChildren.forEach( children, ( child ) => {\n\t\t\tif ( isValidElement( child ) && child.type === SelectOptionGroup ) {\n\t\t\t\tlet hasVisibleChildren = false;\n\n\t\t\t\t// If there's a search term and no external search function\n\t\t\t\tif ( searchKeyword && ! searchFn ) {\n\t\t\t\t\tconst searchTerm = searchKeyword.toLowerCase();\n\t\t\t\t\tconst groupLabel = child.props.label?.toLowerCase() || '';\n\n\t\t\t\t\t// Check if group label matches search term\n\t\t\t\t\tconst groupLabelMatches = groupLabel.includes( searchTerm );\n\n\t\t\t\t\t// Check if any child option matches search term\n\t\t\t\t\tconst hasMatchingChildren = Children.toArray(\n\t\t\t\t\t\tchild.props.children\n\t\t\t\t\t).some( ( groupChild ) => {\n\t\t\t\t\t\tif ( ! isValidElement( groupChild ) ) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst textContent = getTextContent(\n\t\t\t\t\t\t\tgroupChild.props.children\n\t\t\t\t\t\t)?.toLowerCase();\n\n\t\t\t\t\t\treturn textContent.includes( searchTerm );\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Show group if either group label matches or any child matches\n\t\t\t\t\thasVisibleChildren = groupLabelMatches || hasMatchingChildren;\n\t\t\t\t} else {\n\t\t\t\t\t// No search term, show all groups\n\t\t\t\t\thasVisibleChildren = true;\n\t\t\t\t}\n\n\t\t\t\tif ( hasVisibleChildren ) {\n\t\t\t\t\tvisibleGroups++;\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\ttotalGroups = Math.max( 0, visibleGroups - 1 ); // Subtract 1 since we don't need divider after last group\n\t\tlet childIndex = 0;\n\t\tlet groupIndex = 0;\n\n\t\t// Process child to render\n\t\tconst processChild = ( child: React.ReactNode ): React.ReactNode => {\n\t\t\tif ( ! isValidElement( child ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Handle option groups\n\t\t\tif ( child.type === SelectOptionGroup ) {\n\t\t\t\tlet groupLabelMatches = false;\n\n\t\t\t\t// Check if group label matches search term\n\t\t\t\tif ( searchKeyword && ! searchFn ) {\n\t\t\t\t\tconst searchTerm = searchKeyword.toLowerCase();\n\t\t\t\t\tconst groupLabel = child.props.label?.toLowerCase() || '';\n\t\t\t\t\tgroupLabelMatches = groupLabel.includes( searchTerm );\n\t\t\t\t}\n\n\t\t\t\t// Recursively process children of the option group\n\t\t\t\tconst groupChildren = Children.map(\n\t\t\t\t\tchild.props.children,\n\t\t\t\t\t( groupChild ) => {\n\t\t\t\t\t\tif ( ! isValidElement( groupChild ) ) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// If group label matches, show all children regardless of their content\n\t\t\t\t\t\tif ( groupLabelMatches ) {\n\t\t\t\t\t\t\tconst childProps = {\n\t\t\t\t\t\t\t\t...( groupChild.props as SelectOptionProps ),\n\t\t\t\t\t\t\t\tindex: childIndex++,\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\treturn cloneElement( groupChild, childProps );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Otherwise, apply normal filtering to individual options\n\t\t\t\t\t\tif ( searchKeyword && ! searchFn ) {\n\t\t\t\t\t\t\tconst textContent = getTextContent(\n\t\t\t\t\t\t\t\t( groupChild.props as { children?: React.ReactNode } ).children\n\t\t\t\t\t\t\t)?.toLowerCase();\n\t\t\t\t\t\t\tconst searchTerm = searchKeyword.toLowerCase();\n\n\t\t\t\t\t\t\tconst textMatch = textContent?.includes( searchTerm );\n\n\t\t\t\t\t\t\tif ( ! textMatch ) {\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst childProps = {\n\t\t\t\t\t\t\t...( groupChild.props as SelectOptionProps ),\n\t\t\t\t\t\t\tindex: childIndex++,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\treturn cloneElement( groupChild, childProps );\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\t// Only render group if it has visible children\n\t\t\t\tconst hasChildren = groupChildren?.some( ( c: React.ReactNode ) => c !== null );\n\n\t\t\t\tif ( ! hasChildren ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tconst groupProps = {\n\t\t\t\t\t...child.props,\n\t\t\t\t\tchildren: groupChildren,\n\t\t\t\t\tindex: groupIndex,\n\t\t\t\t\ttotalGroups,\n\t\t\t\t};\n\n\t\t\t\tgroupIndex++;\n\t\t\t\treturn cloneElement( child, groupProps );\n\t\t\t}\n\n\t\t\t// Handle regular options when searchFn is not provided\n\t\t\tif ( searchKeyword && ! searchFn ) {\n\t\t\t\tconst textContent = getTextContent(\n\t\t\t\t\tchild.props?.children\n\t\t\t\t)?.toLowerCase();\n\t\t\t\tconst searchTerm = searchKeyword.toLowerCase();\n\n\t\t\t\tconst textMatch = textContent?.includes( searchTerm );\n\n\t\t\t\tif ( ! textMatch ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn cloneElement( child, {\n\t\t\t\t...child.props,\n\t\t\t\tindex: childIndex++,\n\t\t\t} );\n\t\t};\n\n\t\treturn Children.map( children, processChild );\n\t}, [ searchKeyword, value, selected, children, searchFn ] );\n\tconst childrenCount = Children.count( renderChildren );\n\n\t// Update the content list reference.\n\tuseEffect( () => {\n\t\tlistContentRef.current = [];\n\t\t// Get all children as an array.\n\t\tlet allChildren = Children.toArray( children );\n\t\t// If it's an option group and has children.\n\t\tif (\n\t\t\tallChildren &&\n\t\t\tisValidElement( allChildren[ 0 ] ) &&\n\t\t\tallChildren[ 0 ].type === SelectOptionGroup\n\t\t) {\n\t\t\tallChildren = Children.toArray( allChildren )\n\t\t\t\t.map( ( child ) =>\n\t\t\t\t\tisValidElement( child ) ? child.props.children : null\n\t\t\t\t)\n\t\t\t\t.filter( Boolean );\n\t\t}\n\t\t// Update the list content reference.\n\t\tChildren.forEach( allChildren, ( child ) => {\n\t\t\tif ( ! isValidElement( child ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst textContent = getTextContent(\n\t\t\t\tchild.props?.children\n\t\t\t)?.toLowerCase();\n\t\t\t// Handle regular options when searchFn is not provided\n\t\t\tif ( searchKeyword && ! searchFn ) {\n\t\t\t\tconst searchTerm = searchKeyword.toLowerCase();\n\t\t\t\tconst textMatch = textContent?.includes( searchTerm );\n\n\t\t\t\tif ( ! textMatch ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlistContentRef.current.push( textContent );\n\t\t} );\n\t}, [ searchKeyword, searchFn ] );\n\n\tconst [ searching, setSearching ] = useState( false );\n\n\t// Create a function to handle the search function.\n\tconst handleSearchFn = useCallback( async () => {\n\t\tif ( ! searchFn || typeof searchFn !== 'function' || searching ) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetSearching( true );\n\t\ttry {\n\t\t\tawait searchFn( searchKeyword );\n\t\t} catch ( error ) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error( error );\n\t\t} finally {\n\t\t\tsetSearching( false );\n\t\t}\n\t}, [ searchKeyword ] );\n\n\t// Debounce the search function.\n\tconst initiateSearch = useDebouncedCallback( handleSearchFn, debounceDelay! );\n\n\t// Initiate search when searchFn is a function.\n\tuseEffect( () => {\n\t\tif ( typeof searchFn !== 'function' ) {\n\t\t\treturn;\n\t\t}\n\t\tinitiateSearch();\n\t}, [ initiateSearch ] );\n\n\treturn (\n\t\t<>\n\t\t\t{ /* Dropdown */ }\n\t\t\t{ isOpen && (\n\t\t\t\t<>\n\t\t\t\t\t<FloatingFocusManager\n\t\t\t\t\t\tcontext={ context }\n\t\t\t\t\t\tmodal={ false }\n\t\t\t\t\t\tvisuallyHiddenDismiss\n\t\t\t\t\t>\n\t\t\t\t\t\t{ /* Dropdown Wrapper */ }\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tref={ refs.setFloating }\n\t\t\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\t\t\t'box-border [&_*]:box-border w-full bg-white outline-none shadow-lg outline outline-1 outline-border-subtle',\n\t\t\t\t\t\t\t\tcombobox &&\n\t\t\t\t\t\t\t\t\t'grid grid-cols-1 grid-rows-[auto_1fr] divide-y divide-x-0 divide-solid divide-border-subtle',\n\t\t\t\t\t\t\t\tsizeClassNames[ sizeValue as SelectSizes ]\n\t\t\t\t\t\t\t\t\t.dropdown,\n\t\t\t\t\t\t\t\t! combobox && 'h-auto',\n\t\t\t\t\t\t\t\t! combobox\n\t\t\t\t\t\t\t\t\t? 'overflow-y-auto overflow-x-hidden'\n\t\t\t\t\t\t\t\t\t: 'overflow-hidden',\n\t\t\t\t\t\t\t\tclassName\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\t...floatingStyles,\n\t\t\t\t\t\t\t\tzIndex: 1,\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t{ ...getFloatingProps() }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ /* Searchbox */ }\n\t\t\t\t\t\t\t{ combobox && (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\t\t\t\t\tsizeClassNames[ sizeValue as SelectSizes ]\n\t\t\t\t\t\t\t\t\t\t\t.searchbarWrapper\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ searching ? (\n\t\t\t\t\t\t\t\t\t\t<Loader\n\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\tsizeClassNames[\n\t\t\t\t\t\t\t\t\t\t\t\t\tsizeValue as SelectSizes\n\t\t\t\t\t\t\t\t\t\t\t\t].searchbarIcon\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Search\n\t\t\t\t\t\t\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\t\t\t\t\t\t\t'text-icon-secondary shrink-0',\n\t\t\t\t\t\t\t\t\t\t\t\tsizeClassNames[\n\t\t\t\t\t\t\t\t\t\t\t\t\tsizeValue as SelectSizes\n\t\t\t\t\t\t\t\t\t\t\t\t].searchbarIcon\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\t\t\t\t\t\t'px-1 w-full placeholder:text-field-placeholder border-0 focus:outline-none focus:shadow-none',\n\t\t\t\t\t\t\t\t\t\t\tsizeClassNames[\n\t\t\t\t\t\t\t\t\t\t\t\tsizeValue as SelectSizes\n\t\t\t\t\t\t\t\t\t\t\t].searchbar\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\ttype=\"search\"\n\t\t\t\t\t\t\t\t\t\tname=\"keyword\"\n\t\t\t\t\t\t\t\t\t\tplaceholder={ searchPlaceholder }\n\t\t\t\t\t\t\t\t\t\tonChange={ ( event ) =>\n\t\t\t\t\t\t\t\t\t\t\tsetSearchKeyword( event.target.value )\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tvalue={ searchKeyword }\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ /* Dropdown Items Wrapper */ }\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\t\t\t\t'overflow-y-auto overflow-x-hidden',\n\t\t\t\t\t\t\t\t\t! combobox && 'w-full h-full',\n\t\t\t\t\t\t\t\t\tsizeClassNames[ sizeValue as SelectSizes ]\n\t\t\t\t\t\t\t\t\t\t.dropdownItemsWrapper\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ /* Dropdown Items */ }\n\t\t\t\t\t\t\t\t{ !! childrenCount && renderChildren }\n\n\t\t\t\t\t\t\t\t{ /* No items found */ }\n\t\t\t\t\t\t\t\t{ ! childrenCount && (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\t\t\t\t\t\t'p-2 text-center font-medium text-field-placeholder',\n\t\t\t\t\t\t\t\t\t\t\tselectItemClassNames[\n\t\t\t\t\t\t\t\t\t\t\t\tsizeValue as SelectSizes\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tNo items found\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</FloatingFocusManager>\n\t\t\t\t</>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport function SelectPortal( { children, root, id }: SelectPortalProps ) {\n\treturn (\n\t\t<FloatingPortal id={ id } root={ root }>\n\t\t\t{ children }\n\t\t</FloatingPortal>\n\t);\n}\n\nexport function SelectItem( {\n\tvalue,\n\tselected,\n\tchildren,\n\tclassName,\n\t...props\n}: SelectOptionProps ) {\n\tconst {\n\t\tsizeValue,\n\t\tgetItemProps,\n\t\tonKeyDownItem,\n\t\tonClickItem,\n\t\tactiveIndex,\n\t\tselectedIndex,\n\t\tupdateListRef,\n\t\tgetValues,\n\t\tby,\n\t\tmultiple,\n\t} = useSelectContext();\n\tconst { index: indx } = props;\n\tconst initialIndxRef = useRef( indx );\n\n\tconst selectedIconClassName = {\n\t\tsm: 'size-4',\n\t\tmd: 'size-4',\n\t\tlg: 'size-5',\n\t};\n\n\tconst multipleChecked = useMemo( () => {\n\t\tif ( ! multiple ) {\n\t\t\treturn false;\n\t\t}\n\t\tconst currentValue = getValues();\n\t\tif ( ! currentValue ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn ( currentValue as SelectOptionValue[] ).some( ( val ) => {\n\t\t\tif ( val !== null && value !== null && typeof val === 'object' ) {\n\t\t\t\treturn (\n\t\t\t\t\t( val as Record<string, unknown> )[ by ] ===\n\t\t\t\t\t( value as Record<string, unknown> )[ by ]\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn val === value;\n\t\t} );\n\t}, [ value, getValues ] );\n\n\tconst isChecked = useMemo( () => {\n\t\tif ( typeof selected === 'boolean' ) {\n\t\t\treturn selected;\n\t\t}\n\n\t\tif ( multiple ) {\n\t\t\treturn multipleChecked;\n\t\t}\n\n\t\treturn indx === selectedIndex;\n\t}, [ multipleChecked, selectedIndex, selected ] );\n\n\treturn (\n\t\t<div\n\t\t\tclassName={ cn(\n\t\t\t\t'w-full flex items-center justify-between text-text-primary hover:bg-button-tertiary-hover rounded-md transition-all duration-150 cursor-pointer focus:outline-none focus-within:outline-none outline-none',\n\t\t\t\tselectItemClassNames[ sizeValue as SelectSizes ],\n\t\t\t\tindx === activeIndex && 'bg-button-tertiary-hover',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\tref={ ( node ) => {\n\t\t\t\tupdateListRef( indx as number, node as HTMLElement );\n\t\t\t} }\n\t\t\trole=\"option\"\n\t\t\ttabIndex={ indx === activeIndex ? 0 : -1 }\n\t\t\taria-selected={ isChecked && indx === activeIndex }\n\t\t\t{ ...getItemProps( {\n\t\t\t\t// Handle pointer select.\n\t\t\t\tonClick() {\n\t\t\t\t\tonClickItem( initialIndxRef.current as number, value );\n\t\t\t\t},\n\t\t\t\t// Handle keyboard select.\n\t\t\t\tonKeyDown( event: React.KeyboardEvent ) {\n\t\t\t\t\tonKeyDownItem(\n\t\t\t\t\t\tevent,\n\t\t\t\t\t\tinitialIndxRef.current as number,\n\t\t\t\t\t\tvalue\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t} ) }\n\t\t>\n\t\t\t<span className=\"w-full truncate\">{ children }</span>\n\t\t\t{ isChecked && (\n\t\t\t\t<CheckIcon\n\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\t'text-icon-on-color-disabled',\n\t\t\t\t\t\tselectedIconClassName[ sizeValue as SelectSizes ]\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nconst SelectComponent = ( {\n\tid,\n\tsize: sizeValue = 'md', // sm, md, lg\n\tvalue, // Value of the select (for controlled component).\n\tdefaultValue, // Default value of the select (for uncontrolled component).\n\tonChange, // Callback function to handle the change event.\n\tby = 'id', // Used to identify the select component. Default is 'id'.\n\tchildren,\n\tmultiple = false, // If true, it will allow multiple selection.\n\tcombobox = false, // If true, it will show a search box.\n\tdisabled = false, // If true, it will disable the select component.\n\tsearchPlaceholder = 'Search...', // Placeholder text for search box.\n\tsearchFn, // Function to handle the search.\n\tdebounceDelay = 500, // Debounce delay for the search.\n}: SelectProps ) => {\n\tconst selectId = useMemo( () => id || `select-${ nanoid() }`, [ id ] );\n\tconst isControlled = useMemo( () => typeof value !== 'undefined', [ value ] );\n\tconst [ selected, setSelected ] = useState<\n\t\tSelectOptionValue | SelectOptionValue[]\n\t>( defaultValue! );\n\tconst [ searchKeyword, setSearchKeyword ] = useState( '' );\n\n\tconst getValues = useCallback<SelectGetValues>( () => {\n\t\tif ( isControlled ) {\n\t\t\treturn value as string | number | Record<string, unknown>;\n\t\t}\n\t\treturn selected as string | number | Record<string, unknown>;\n\t}, [ isControlled, value, selected ] );\n\n\t// Dropdown position related code (Start)\n\tconst [ isOpen, setIsOpen ] = useState( false );\n\tconst [ activeIndex, setActiveIndex ] = useState<number | null>( null );\n\tconst [ selectedIndex, setSelectedIndex ] = useState<number | null>( null );\n\n\tconst dropdownMaxHeightBySize = {\n\t\tsm: combobox ? 256 : 172,\n\t\tmd: combobox ? 256 : 216,\n\t\tlg: combobox ? 256 : 216,\n\t};\n\n\tconst { refs, floatingStyles, context } = useFloating( {\n\t\tstrategy: 'fixed',\n\t\tplacement: 'bottom-start',\n\t\topen: isOpen,\n\t\tonOpenChange: setIsOpen,\n\t\twhileElementsMounted: autoUpdate,\n\t\tmiddleware: [\n\t\t\toffset( 5 ),\n\t\t\tflip( { padding: 10 } ),\n\t\t\tsize( {\n\t\t\t\tapply( { rects, elements, availableHeight } ) {\n\t\t\t\t\tObject.assign( elements.floating.style, {\n\t\t\t\t\t\tmaxHeight: `min(${ availableHeight }px, ${ dropdownMaxHeightBySize[ sizeValue as SelectSizes ] }px)`,\n\t\t\t\t\t\tmaxWidth: `${ rects.reference.width }px`,\n\t\t\t\t\t} );\n\t\t\t\t},\n\t\t\t\tpadding: 10,\n\t\t\t} ),\n\t\t],\n\t} );\n\n\tconst listRef = useRef<Array<HTMLElement | null>>( [] );\n\tconst listContentRef = useRef( [] );\n\tconst isTypingRef = useRef( false );\n\n\tconst click = useClick( context, { event: 'mousedown' } );\n\tconst dismiss = useDismiss( context );\n\tconst role = useRole( context, { role: 'listbox' } );\n\tconst listNav = useListNavigation( context, {\n\t\tlistRef,\n\t\tactiveIndex,\n\t\tselectedIndex,\n\t\tonNavigate: setActiveIndex,\n\t\t// This is a large list, allow looping.\n\t\tloop: true,\n\t} );\n\tconst typeahead = useTypeahead( context, {\n\t\tlistRef: listContentRef,\n\t\tactiveIndex,\n\t\tselectedIndex,\n\t\tonMatch: isOpen ? setActiveIndex : setSelectedIndex,\n\t\tonTypingChange( isTyping ) {\n\t\t\tisTypingRef.current = isTyping;\n\t\t},\n\t} );\n\n\tconst { getReferenceProps, getFloatingProps, getItemProps } =\n\t\tuseInteractions( [\n\t\t\tdismiss,\n\t\t\trole,\n\t\t\tlistNav,\n\t\t\tclick,\n\t\t\t...( ! combobox ? [ typeahead ] : [] ),\n\t\t] );\n\n\tconst handleMultiSelect: OnClick = ( index, newValue ) => {\n\t\tconst selectedValues = [\n\t\t\t...( ( getValues() as SelectOptionValue[] ) ?? [] ),\n\t\t];\n\t\tconst valueIndex = selectedValues.findIndex( ( selectedValue ) => {\n\t\t\tif (\n\t\t\t\tselectedValue !== null &&\n\t\t\t\tnewValue !== null &&\n\t\t\t\ttypeof selectedValue === 'object'\n\t\t\t) {\n\t\t\t\treturn (\n\t\t\t\t\t( selectedValue as Record<string, unknown> )[ by ] ===\n\t\t\t\t\t( newValue as Record<string, unknown> )[ by ]\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn selectedValue === newValue;\n\t\t} );\n\n\t\tif ( valueIndex !== -1 ) {\n\t\t\treturn;\n\t\t}\n\t\tselectedValues.push( newValue );\n\n\t\tif ( ! isControlled ) {\n\t\t\tsetSelected( selectedValues );\n\t\t}\n\t\tsetSelectedIndex( index );\n\t\t( refs.reference.current as HTMLElement ).focus();\n\t\tsetIsOpen( false );\n\t\tsetSearchKeyword( '' );\n\t\tif ( typeof onChange === 'function' ) {\n\t\t\tonChange( selectedValues );\n\t\t}\n\t};\n\n\tconst handleSelect: OnClick = ( index, newValue ) => {\n\t\tif ( multiple ) {\n\t\t\treturn handleMultiSelect( index, newValue );\n\t\t}\n\t\tsetSelectedIndex( index );\n\t\tif ( ! isControlled ) {\n\t\t\tsetSelected( newValue );\n\t\t}\n\t\t( refs.reference.current as HTMLElement ).focus();\n\t\tsetIsOpen( false );\n\t\tsetSearchKeyword( '' );\n\t\tif ( typeof onChange === 'function' ) {\n\t\t\tonChange( newValue );\n\t\t}\n\t};\n\t// Dropdown position related code (End)\n\n\tconst updateListRef = useCallback( ( index: number, node: HTMLElement ) => {\n\t\tlistRef.current[ index ] = node;\n\t}, [] );\n\n\tconst onClickItem: OnClick = ( index, newValue ) => {\n\t\thandleSelect( index, newValue );\n\t};\n\n\tconst onKeyDownItem: OnKeyDown = ( event, index, newValue ) => {\n\t\tif ( event.key === 'Enter' ) {\n\t\t\tevent.preventDefault();\n\t\t\thandleSelect( index, newValue );\n\t\t}\n\n\t\tif ( event.key === ' ' && ! isTypingRef.current ) {\n\t\t\tevent.preventDefault();\n\t\t\thandleSelect( index, newValue );\n\t\t}\n\t};\n\n\treturn (\n\t\t<SelectContext.Provider\n\t\t\tvalue={ {\n\t\t\t\tselectedIndex,\n\t\t\t\tsetSelectedIndex,\n\t\t\t\tactiveIndex,\n\t\t\t\tsetActiveIndex,\n\t\t\t\tselected,\n\t\t\t\tsetSelected,\n\t\t\t\thandleSelect,\n\t\t\t\tcombobox,\n\t\t\t\tsizeValue,\n\t\t\t\tmultiple,\n\t\t\t\tonChange,\n\t\t\t\tisTypingRef,\n\t\t\t\tgetItemProps,\n\t\t\t\tonClickItem,\n\t\t\t\tonKeyDownItem,\n\t\t\t\tgetValues,\n\t\t\t\tselectId,\n\t\t\t\tgetReferenceProps,\n\t\t\t\tisOpen,\n\t\t\t\tvalue,\n\t\t\t\tupdateListRef,\n\t\t\t\trefs,\n\t\t\t\tlistContentRef,\n\t\t\t\tby,\n\t\t\t\tgetFloatingProps,\n\t\t\t\tfloatingStyles,\n\t\t\t\tcontext,\n\t\t\t\tsearchKeyword,\n\t\t\t\tsetSearchKeyword,\n\t\t\t\tdisabled,\n\t\t\t\tisControlled,\n\t\t\t\tsearchPlaceholder,\n\t\t\t\tsearchFn,\n\t\t\t\tdebounceDelay,\n\t\t\t} }\n\t\t>\n\t\t\t{ children }\n\t\t</SelectContext.Provider>\n\t);\n};\n\nSelectComponent.displayName = 'Select';\n\nconst Select = Object.assign( SelectComponent, {\n\tPortal: SelectPortal,\n\tButton: SelectButton,\n\tOptions: SelectOptions,\n\tOption: SelectItem,\n\tOptionGroup: SelectOptionGroup,\n} );\n\nSelectPortal.displayName = 'Select.Portal';\nSelectButton.displayName = 'Select.Button';\nSelectOptions.displayName = 'Select.Options';\nSelectItem.displayName = 'Select.Option';\nSelectOptionGroup.displayName = 'Select.OptionGroup';\n\nexport default Select;\n"],"names":["SelectContext","createContext","useSelectContext","useContext","SelectButton","forwardRef","children","icon","placeholder","optionIcon","render","label","className","props","ref","sizeValue","getReferenceProps","getValues","selectId","refs","isOpen","multiple","combobox","setSelected","onChange","isControlled","disabled","by","badgeSize","getIcon","useCallback","iconClassNames","disabledClassNames","ChevronsUpDown","jsx","ChevronDown","renderSelected","selectedValue","valueItem","index","Badge","handleOnCloseItem","renderValue","childProps","isValidElement","cn","sizeClassNames","value","event","selectedValues","selectedIndex","val","jsxs","mergeRefs","SelectOptionGroup","totalGroups","groupClassNames","Fragment","Children","optionGroupDividerClassNames","optionGroupDividerSizeClassNames","SelectOptions","context","floatingStyles","getFloatingProps","setSearchKeyword","setActiveIndex","setSelectedIndex","selected","searchKeyword","listContentRef","searchPlaceholder","activeIndex","searchFn","debounceDelay","initialSelectedValueIndex","useMemo","currentValue","indexValue","allChildren","group","child","childValue","useLayoutEffect","renderChildren","visibleGroups","hasVisibleChildren","searchTerm","groupLabelMatches","hasMatchingChildren","groupChild","getTextContent","childIndex","groupIndex","processChild","groupChildren","cloneElement","textContent","c","groupProps","childrenCount","useEffect","searching","setSearching","useState","handleSearchFn","error","initiateSearch","useDebouncedCallback","FloatingFocusManager","Loader","Search","selectItemClassNames","SelectPortal","root","id","FloatingPortal","SelectItem","getItemProps","onKeyDownItem","onClickItem","updateListRef","indx","initialIndxRef","useRef","selectedIconClassName","multipleChecked","isChecked","node","CheckIcon","SelectComponent","defaultValue","nanoid","setIsOpen","dropdownMaxHeightBySize","useFloating","autoUpdate","offset","flip","size","rects","elements","availableHeight","listRef","isTypingRef","click","useClick","dismiss","useDismiss","role","useRole","listNav","useListNavigation","typeahead","useTypeahead","isTyping","useInteractions","handleMultiSelect","newValue","handleSelect","Select"],"mappings":"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"}