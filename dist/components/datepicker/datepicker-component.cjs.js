"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("react/jsx-runtime"),C=require("react"),L=require("lucide-react"),$=require("react-day-picker"),o=require("date-fns"),x=require("../../utilities/functions.cjs.js"),S=require("./utils.cjs.js"),B=require("../button/button.cjs.js"),oe=({width:z,className:G,classNames:H,selectedDates:c,setSelectedDates:g,showOutsideDays:J=!0,mode:b="single",variant:E="normal",alignment:K="horizontal",numberOfMonths:O,disabled:Q,...D})=>{const U=C.isValidElement(D.footer)||typeof D.footer=="function",[M,A]=C.useState(!1),[w,q]=C.useState(!1),[m,R]=C.useState(new Date().getFullYear()),[Y,T]=C.useState(m-m%24);c===void 0&&(b==="multiple"?c=[]:b==="range"?c={from:void 0,to:void 0}:c=void 0);function X(r){const{goToMonth:n,nextMonth:e,previousMonth:s}=$.useDayPicker(),i=o.format(r.calendarMonth.date,"yyyy"),k=o.format(r.calendarMonth.date,"MMMM"),l=new Date(r.calendarMonth.date);l.setDate(l.getDate()-l.getDay());const j=Array.from({length:7},(a,u)=>{const F=new Date(l);return F.setDate(l.getDate()+u),S.formatWeekdayName(F)}),v=()=>{if(w)T(Y-24);else if(M){const a=new Date(m-1,r.calendarMonth.date.getMonth());R(a.getFullYear()),n(a)}else n(s)},f=()=>{if(w)T(Y+24);else if(M){const a=new Date(m+1,r.calendarMonth.date.getMonth());R(a.getFullYear()),n(a)}else n(e)},y=a=>{R(a),q(!1),A(!0),n(new Date(a,r.calendarMonth.date.getMonth()))};let h;return w?h=`${Y} - ${Y+23}`:M?h=i:h=`${k} ${i}`,t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx(B.default,{variant:"ghost",onClick:v,className:"bg-background-primary border-none cursor-pointer","aria-label":"Previous Button",icon:t.jsx(L.ChevronLeft,{className:"h-4 w-4 text-button-tertiary-color"})}),t.jsx(B.default,{variant:"ghost",onClick:()=>{O>1||(M?(q(!0),A(!1)):w?q(!1):A(!M))},children:h}),t.jsx(B.default,{variant:"ghost",onClick:f,className:"bg-background-primary border-none cursor-pointer","aria-label":"Next Button",icon:t.jsx(L.ChevronRight,{className:"h-4 w-4 text-button-tertiary-color"})})]}),w&&t.jsx("div",{className:"grid grid-cols-4 w-full",children:S.generateYearRange(Y).map(a=>t.jsxs(B.default,{variant:"ghost",onClick:()=>y(a),className:x.cn("h-10 w-full text-center font-normal relative",a===m&&a!==new Date().getFullYear()&&"bg-background-brand text-text-on-color hover:bg-background-brand hover:text-black",a===new Date().getFullYear()&&"font-semibold"),children:[a,a===new Date().getFullYear()&&S.currentTimeDot()]},a))}),M&&!w&&t.jsx("div",{className:"grid grid-cols-4 gap-2 my-12",children:Array.from({length:12},(a,u)=>t.jsxs(B.default,{variant:"ghost",onClick:()=>{A(!1),n(new Date(m,u))},className:x.cn("px-1.5 py-2 h-10 w-[4.375rem] text-center font-normal relative",u===r.calendarMonth.date.getMonth()&&u!==new Date().getMonth()&&m===r.calendarMonth.date.getFullYear()&&r.calendarMonth.date.getFullYear()!==new Date().getFullYear()&&"bg-background-brand text-text-on-color hover:bg-background-brand hover:text-black",u===new Date().getMonth()&&new Date().getFullYear()===m&&"font-semibold"),children:[o.format(new Date(0,u),"MMM"),new Date().getMonth()===u&&new Date().getFullYear()===m&&S.currentTimeDot()]},u))}),!M&&!w&&t.jsx(Z,{weekdays:j})]})}const Z=({weekdays:r})=>t.jsx("div",{className:"flex justify-between",children:r.map((n,e)=>t.jsx("button",{className:"h-10 w-10 px-1.5 py-2 text-center text-text-secondary text-sm font-normal content-center bg-transparent border-none shrink-0",children:n},e))}),I=({day:r,modifiers:n,...e})=>{const{selected:s,today:i,disabled:k,outside:l,range_middle:j,range_start:v,range_end:f}=n,y=v||f||j,h=new Date,a=c?.to,u=o.format(r.displayMonth,"yyyy-MM")===o.format(h,"yyyy-MM"),F=a&&o.format(a,"yyyy-MM")===o.format(r.date,"yyyy-MM"),d=o.subMonths(h,1),p=o.format(r.date,"yyyy-MM")===o.format(d,"yyyy-MM"),_=u||F||y,ee=!J&&l,te=x.cn("h-10 w-10 flex items-center justify-center transition text-text-secondary relative text-sm","border-none rounded",(s||y)&&!l?"bg-background-brand text-text-on-color":"bg-transparent hover:bg-button-tertiary-hover",j&&_&&!l?"bg-brand-background-50 text-text-secondary rounded-none":"",k?"opacity-50 cursor-not-allowed text-text-disabled":"cursor-pointer",l&&!y||!_&&l||l&&!p||l?"bg-transparent opacity-50 text-text-disabled cursor-auto":""),re=N=>{typeof e.onMouseEnter=="function"&&e.onMouseEnter(N),N.currentTarget.setAttribute("data-hover","true")},ne=N=>{typeof e.onMouseLeave=="function"&&e.onMouseLeave(N),N.currentTarget.setAttribute("data-hover","false")},ae=N=>{typeof e.onClick=="function"&&e.onClick(N)};return t.jsxs("button",{className:x.cn(te,i&&"font-semibold",ee&&"opacity-0",v&&"fui-range-start",f&&"fui-range-end",j&&"fui-range-middle",{"[&:is([data-hover=true])]:bg-brand-background-50 [&:is([data-hover=true])]:rounded-none":!y&&!s}),disabled:k||l,onClick:ae,onMouseEnter:re,onMouseLeave:ne,"aria-label":o.format(r.date,"EEEE, MMMM do, yyyy"),"data-selected":s,"data-day":o.format(r.date,"yyyy-MM-dd"),children:[e.children,i&&_&&t.jsx("span",{className:"absolute h-1 w-1 bg-background-brand rounded-full bottom-1"})]})},V=r=>t.jsx("div",{className:"flex flex-col bsf-force-ui-month-weeks",children:r.children[1].props.children.map((n,e)=>t.jsx("div",{className:"flex flex-row justify-between",children:n},e))}),P=(r,n)=>{if(b==="range"){const e=c;if(!e?.from&&!e?.to||e?.from&&e?.to){if(e.from&&o.isEqual(n,e?.from)||e.to&&o.isEqual(n,e?.to)){g({from:void 0,to:void 0});return}g({from:n,to:void 0});return}if(e?.from&&!e?.to){if(n<e.from){g({from:n,to:e.from});return}g({from:e.from,to:n});return}g(r)}else b==="multiple"?c.some(e=>o.format(e,"yyyy-MM-dd")===o.format(n,"yyyy-MM-dd"))?g(c.filter(e=>o.format(e,"yyyy-MM-dd")!==o.format(n,"yyyy-MM-dd"))):g([...c,n]):b==="single"&&g(r)},W=x.cn("relative bg-background-primary shadow-datepicker-wrapper",z,K==="vertical"?"flex flex-col":"flex flex-row  gap-3",E==="normal"?"rounded-tr-md rounded-tl-md border border-solid border-border-subtle":"",E==="presets"?"rounded-tr-md border border-solid border-border-subtle":"",E==="dualdate"?"rounded-tr-md rounded-tl-md border border-solid border-border-subtle":"",U?"rounded-b-none":"rounded-bl-md rounded-br-md");return t.jsx(t.Fragment,{children:t.jsx($.DayPicker,{mode:b,selected:c,onSelect:P,hideNavigation:!0,captionLayout:"label",className:x.cn(G),formatters:{formatWeekdayName:S.formatWeekdayName},classNames:{months:W,month:"flex flex-col p-2 gap-1 text-center w-full",caption:"relative flex justify-center items-center",table:"w-full border-separate border-spacing-0",head_row:"flex mb-1",head_cell:"text-muted-foreground rounded-md w-10 font-normal text-sm",row:"flex w-full mt-2",cell:"h-10 w-10 text-center text-sm p-0 relative",...H},numberOfMonths:O,showOutsideDays:!0,components:{MonthCaption:X,DayButton:I,Day:r=>{const n=Object.entries(r).reduce((e,[s,i])=>(s.startsWith("data-")&&(e[s]=i),e),{});return t.jsx("div",{...n,className:x.cn(r.className,"inline-flex"),children:r.children})},Weekdays:()=>t.jsx(t.Fragment,{}),Week:r=>t.jsx("div",{className:x.cn("bsf-force-ui-month-week flex flex-row",r.className),children:r.children}),Months:r=>t.jsx(t.Fragment,{children:t.jsx("div",{className:x.cn("bsf-force-ui-date-picker-month",W),children:r?.children?.map((n,e)=>n?t.jsx(C.Fragment,{children:n.map((s,i)=>t.jsxs(C.Fragment,{children:[i>0&&t.jsx("div",{className:"border border-solid border-border-subtle border-l-0"}),s]},i))},e):null)})}),MonthGrid:r=>!M&&!w?t.jsx(V,{...r}):t.jsx(t.Fragment,{})},...b==="range"?{required:!1}:{},...D,onDayMouseEnter:(r,n,e)=>{if(b!=="range")return;const s=c;if(s?.from&&s?.to||!s?.from&&!s?.to){Array.from(document.querySelectorAll("[data-hover]")).forEach(p=>{p.setAttribute("data-hover","false")});return}const i=e.target,k=new Date(i.dataset.day),l=o.isBefore(k,s.from),j=o.isAfter(k,s.to);let v;switch(E){case"dualdate":case"presets":v=i.closest(".bsf-force-ui-date-picker-month");break;case"normal":default:v=i.closest(".bsf-force-ui-month-weeks");break}const f=Array.from(v.querySelectorAll("button"));j&&f.sort((d,p)=>o.isAfter(new Date(d.dataset.day),new Date(p.dataset.day))?-1:1),l&&f.sort((d,p)=>o.isBefore(new Date(d.dataset.day),new Date(p.dataset.day))?1:-1);const y=f.indexOf(i),h=f.findIndex(d=>d.getAttribute("data-selected")==="true"),a=[],u=Math.min(y,h),F=Math.max(y,h);for(let d=u;d<=F;d++)f[d]?.disabled||a.push(f[d]);f.forEach(d=>{d.setAttribute("data-hover",a.includes(d)?"true":"false")})},disabled:Q})})};exports.default=oe;
//# sourceMappingURL=datepicker-component.cjs.js.map
