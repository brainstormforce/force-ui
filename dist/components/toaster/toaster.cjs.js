"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const n=require("react/jsx-runtime"),o=require("react"),m=require("lucide-react"),E=require("./controller.cjs.js"),g=require("../../utilities/functions.cjs.js"),a=require("./utils.cjs.js"),r=require("./component-style.cjs.js"),R=require("react-dom"),k=require("framer-motion"),_=require("../../hoc/withSingleton.cjs.js"),v=({position:i="top-right",design:x="stack",theme:j="light",className:y="",autoDismiss:u=!0,dismissAfter:s=5e3})=>{const[h,d]=o.useState([]);o.useEffect(()=>{E.ToastState.subscribe(e=>{if(e?.dismiss){d(t=>t.map(l=>l.id===e.id?{...l,dismiss:!0}:l));return}setTimeout(()=>{R.flushSync(()=>d(t=>t.findIndex(c=>c.id===e.id)!==-1?t.map(c=>c.id===e.id?{...c,...e}:c):[...t,e]))})})},[]);const f=e=>{d(t=>t.filter(l=>l.id!==e))};return n.jsx("ul",{className:g.cn("fui-toast-container fixed flex flex-col list-none z-20 p-10 pointer-events-none [&>li]:pointer-events-auto gap-3",r.positionClassNames[i]??r.positionClassNames["top-right"],y),children:n.jsx(k.AnimatePresence,{initial:!1,children:h.map(e=>n.jsx(k.motion.li,{initial:{opacity:0,y:50,scale:.7},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.6,transition:{duration:.15}},layoutId:`toast-${e.id}`,children:n.jsx(T,{toastItem:e,title:e.title,content:e?.description,icon:e?.icon??void 0,design:e?.design??x,autoDismiss:e?.autoDismiss??u,dismissAfter:e?.dismissAfter??s,removeToast:f,variant:e.type,theme:e?.theme??j})},e.id))})})},T=({toastItem:i,title:x="",content:j="",autoDismiss:y=!0,dismissAfter:u=5e3,theme:s="light",design:h="stack",icon:d,variant:f="neutral",removeToast:e})=>{const t=o.useRef(0),l=o.useRef(0),c=o.useRef(),b=(p,D=u)=>{if(!(!y||u<0))return t.current=new Date().getTime(),setTimeout(()=>{typeof e=="function"&&e(p.id)},D)},q=()=>{clearTimeout(c.current),l.current=new Date().getTime()},S=()=>{c.current=b(i,u-(l.current-t.current))};o.useEffect(()=>{const p=u;return c.current=b(i,p),()=>{clearTimeout(c.current)}},[]),o.useEffect(()=>{!i?.dismiss||typeof e!="function"||e(i.id)},[i]);const C=()=>{typeof e=="function"&&i?.action?.onClick?.(()=>e(i.id))};let N=null;return h==="stack"&&(N=n.jsx("div",{className:g.cn("flex items-center justify-start p-4 gap-2 relative border border-solid rounded-md shadow-lg",s==="dark"?r.variantClassNames.dark:r.variantClassNames.light?.[f],r.containerVariantClassNames.stack),onMouseEnter:q,onMouseLeave:S,children:i.type!=="custom"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"self-start flex items-center justify-center [&_svg]:size-5 shrink-0",children:a.getIcon({variant:f,icon:d,theme:s})}),n.jsxs("div",{className:"flex flex-col items-start justify-start gap-0.5 mr-6",children:[a.getTitle({title:x,theme:s}),a.getContent({content:j,theme:s}),i?.action?.label&&typeof i?.action?.onClick=="function"&&n.jsx("div",{className:"mt-2.5",children:a.getAction({actionLabel:i?.action?.label,actionType:i?.action?.type??"button",onAction:C,theme:s})})]}),n.jsx("div",{className:"absolute right-4 top-4 [&_svg]:size-5",children:n.jsx("button",{className:g.cn("bg-transparent m-0 p-0 border-none focus:outline-none active:outline-none cursor-pointer",r.closeIconClassNames[s]??r.closeIconClassNames.light),onClick:p=>{p.preventDefault(),p.stopPropagation(),typeof e=="function"&&e(i.id)},children:n.jsx(m.X,{})})})]}):i?.jsx?.({close:()=>e(i.id),action:i?.action?{...i?.action,onClick:C}:null})})),h==="inline"&&(N=n.jsxs("div",{className:g.cn("flex items-center justify-start p-3 gap-2 relative border border-solid rounded-md shadow-lg",s==="dark"?r.variantClassNames.dark:r.variantClassNames.light?.[f],r.containerVariantClassNames.inline),children:[n.jsx("div",{className:"self-start flex items-center justify-center [&_svg]:size-5 shrink-0",children:a.getIcon({variant:f,icon:d,theme:s})}),n.jsxs("div",{className:"flex items-start justify-start gap-1 mr-10 [&>span:first-child]:shrink-0",children:[a.getTitle({title:x,theme:s}),a.getContent({content:j,theme:s})]}),n.jsx("div",{className:"absolute right-3 top-3 [&_svg]:size-5",children:n.jsx("button",{className:g.cn("bg-transparent m-0 p-0 border-none focus:outline-none active:outline-none cursor-pointer",r.closeIconClassNames[s]??r.closeIconClassNames.light),onClick:()=>e(i.id),children:n.jsx(m.X,{})})})]})),N},w=_.default(v);exports.Toast=T;exports.Toaster=v;exports.default=w;
//# sourceMappingURL=toaster.cjs.js.map
