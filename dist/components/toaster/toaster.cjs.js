"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const n=require("react/jsx-runtime"),o=require("react"),m=require("lucide-react"),R=require("./controller.cjs.js"),p=require("../../utilities/functions.cjs.js"),a=require("./utils.cjs.js"),r=require("./component-style.cjs.js"),_=require("react-dom"),k=require("framer-motion"),w=require("../../hoc/withSingleton.cjs.js"),v=({position:i="top-right",design:g="stack",theme:x="light",className:h="",autoDismiss:u=!0,dismissAfter:s=5e3})=>{const[j,d]=o.useState([]);o.useEffect(()=>{R.ToastState.subscribe(e=>{if(e?.dismiss){d(c=>c.map(l=>l.id===e.id?{...l,dismiss:!0}:l));return}setTimeout(()=>{_.flushSync(()=>d(c=>c.findIndex(t=>t.id===e.id)!==-1?c.map(t=>t.id===e.id?{...t,...e}:t):[...c,e]))})})},[]);const f=e=>{d(c=>c.filter(l=>l.id!==e))};return n.jsx("ul",{className:p.cn("fixed flex flex-col list-none z-20 p-10 pointer-events-none [&>li]:pointer-events-auto gap-3",r.positionClassNames[i]??r.positionClassNames["top-right"],h),children:n.jsx(k.AnimatePresence,{initial:!1,children:j.map(e=>n.jsx(k.motion.li,{initial:{opacity:0,y:50,scale:.7},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.6,transition:{duration:.15}},layoutId:`toast-${e.id}`,children:n.jsx(T,{toastItem:e,title:e.title,content:e?.description,icon:e?.icon??void 0,design:e?.design??g,autoDismiss:e?.autoDismiss??u,dismissAfter:e?.dismissAfter??s,removeToast:f,variant:e.type,theme:e?.theme??x})},e.id))})})},T=({toastItem:i,title:g="",content:x="",autoDismiss:h=!0,dismissAfter:u=5e3,theme:s="light",design:j="stack",icon:d,variant:f="neutral",removeToast:e})=>{const c=o.useRef(0),l=o.useRef(0),t=o.useRef(),b=(N,E=u)=>{if(!(!h||u<0))return c.current=new Date().getTime(),setTimeout(()=>{typeof e=="function"&&e(N.id)},E)},q=()=>{clearTimeout(t.current),l.current=new Date().getTime()},S=()=>{t.current=b(i,u-(l.current-c.current))};o.useEffect(()=>{const N=u;return t.current=b(i,N),()=>{clearTimeout(t.current)}},[]),o.useEffect(()=>{!i?.dismiss||typeof e!="function"||e(i.id)},[i]);const C=()=>{typeof e=="function"&&i?.action?.onClick?.(()=>e(i.id))};let y=null;return j==="stack"&&(y=n.jsx("div",{className:p.cn("flex items-center justify-start p-4 gap-2 relative border border-solid rounded-md shadow-lg",s==="dark"?r.variantClassNames.dark:r.variantClassNames.light?.[f],r.containerVariantClassNames.stack),onMouseEnter:q,onMouseLeave:S,children:i.type!=="custom"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"self-start flex items-center justify-center [&_svg]:size-5 shrink-0",children:a.getIcon({variant:f,icon:d,theme:s})}),n.jsxs("div",{className:"flex flex-col items-start justify-start gap-0.5 mr-6",children:[a.getTitle({title:g,theme:s}),a.getContent({content:x,theme:s}),i?.action?.label&&typeof i?.action?.onClick=="function"&&n.jsx("div",{className:"mt-2.5",children:a.getAction({actionLabel:i?.action?.label,actionType:i?.action?.type??"button",onAction:C,theme:s})})]}),n.jsx("div",{className:"absolute right-4 top-4 [&_svg]:size-5",children:n.jsx("button",{className:p.cn("bg-transparent m-0 p-0 border-none focus:outline-none active:outline-none cursor-pointer",r.closeIconClassNames[s]??r.closeIconClassNames.light),onClick:()=>{typeof e=="function"&&e(i.id)},children:n.jsx(m.X,{})})})]}):i?.jsx?.({close:()=>e(i.id),action:i?.action?{...i?.action,onClick:C}:null})})),j==="inline"&&(y=n.jsxs("div",{className:p.cn("flex items-center justify-start p-3 gap-2 relative border border-solid rounded-md shadow-lg",s==="dark"?r.variantClassNames.dark:r.variantClassNames.light?.[f],r.containerVariantClassNames.inline),children:[n.jsx("div",{className:"self-start flex items-center justify-center [&_svg]:size-5 shrink-0",children:a.getIcon({variant:f,icon:d,theme:s})}),n.jsxs("div",{className:"flex items-start justify-start gap-1 mr-10 [&>span:first-child]:shrink-0",children:[a.getTitle({title:g,theme:s}),a.getContent({content:x,theme:s})]}),n.jsx("div",{className:"absolute right-3 top-3 [&_svg]:size-5",children:n.jsx("button",{className:p.cn("bg-transparent m-0 p-0 border-none focus:outline-none active:outline-none cursor-pointer",r.closeIconClassNames[s]??r.closeIconClassNames.light),onClick:()=>e(i.id),children:n.jsx(m.X,{})})})]})),y},z=w.default(v);exports.Toast=T;exports.Toaster=v;exports.default=z;
//# sourceMappingURL=toaster.cjs.js.map
