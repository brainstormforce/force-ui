{"version":3,"file":"avatar.es.js","sources":["../../../src/components/avatar/avatar.tsx"],"sourcesContent":["import React, { forwardRef, useEffect, useState, type ReactNode } from 'react';\nimport { cn } from '@/utilities/functions';\nimport { User } from 'lucide-react';\n\nexport type AvatarProps = {\n\t/** Defines the style variant of the avatar. */\n\tvariant?: 'white' | 'gray' | 'primary' | 'primary-light' | 'dark';\n\t/** Defines the size of the avatar. */\n\tsize?: 'xxs' | 'xs' | 'sm' | 'md' | 'lg';\n\t/** Defines the border of the avatar. */\n\tborder?: 'none' | 'subtle' | 'ring';\n\t/** The URL of the Avatar image */\n\turl?: string;\n\t/** Defines the children of the avatar. */\n\tchildren?: ReactNode;\n\t/** Defines the extra classes */\n\tclassName?: string;\n\t/** The URL of the Avatar image. */\n\tsrc?: string;\n\t/** Alt text for the avatar image. */\n\talt?: string;\n} & Pick<React.HTMLAttributes<HTMLImageElement>, 'title'>;\n\ntype Ref = HTMLImageElement;\n\nconst Avatar = forwardRef<Ref, AvatarProps>(\n\t(\n\t\t{\n\t\t\tvariant = 'primary',\n\t\t\tsize = 'md',\n\t\t\tborder = 'subtle',\n\t\t\tsrc: url,\n\t\t\talt,\n\t\t\tchildren,\n\t\t\tclassName,\n\t\t\t...props\n\t\t},\n\t\tref\n\t) => {\n\t\tconst [ imageError, setImageError ] = useState<boolean>( false );\n\n\t\tconst effectiveBorder = url && border === 'none' ? 'subtle' : border;\n\t\tconst baseClassNames =\n\t\t\t'rounded-full overflow-hidden flex items-center justify-center';\n\n\t\tconst variantClassNames = {\n\t\t\twhite: 'text-text-primary bg-background-primary',\n\t\t\tgray: 'text-text-primary bg-background-secondary',\n\t\t\tprimary: 'text-text-on-color bg-background-brand',\n\t\t\t'primary-light': 'text-text-primary bg-brand-background-50',\n\t\t\tdark: 'text-text-on-color bg-button-secondary',\n\t\t}?.[ variant ];\n\n\t\tconst sizeClassNames = {\n\t\t\txxs: 'size-5 [&>svg]:size-3 text-xs',\n\t\t\txs: 'size-6 [&>svg]:size-4 text-sm',\n\t\t\tsm: 'size-8 [&>svg]:size-5 text-base',\n\t\t\tmd: 'size-10 [&>svg]:size-6 text-lg',\n\t\t\tlg: 'size-12 [&>svg]:size-12 text-lg',\n\t\t}?.[ size ];\n\n\t\tconst borderClassNames = {\n\t\t\tnone: '',\n\t\t\tsubtle: 'ring-1 ring-border-transparent-subtle',\n\t\t\tring: 'ring ring-border-subtle',\n\t\t}?.[ effectiveBorder ];\n\n\t\tconst contentClassNames = url ? 'object-cover object-center' : '';\n\n\t\tconst getChildren = () => {\n\t\t\t// When image url is provided and image is not loaded, show children.\n\t\t\tif ( url && imageError ) {\n\t\t\t\tif ( alt && typeof alt === 'string' ) {\n\t\t\t\t\treturn alt?.[ 0 ]?.toUpperCase();\n\t\t\t\t} else if ( children && typeof children === 'string' ) {\n\t\t\t\t\treturn children?.[ 0 ]?.toUpperCase();\n\t\t\t\t} else if ( ! children && ! alt ) {\n\t\t\t\t\treturn <User />;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// For text avatars.\n\t\t\tif ( ! children ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif ( typeof children === 'string' ) {\n\t\t\t\treturn children?.[ 0 ]?.toUpperCase();\n\t\t\t}\n\t\t\treturn children;\n\t\t};\n\n\t\tconst handleImageError = () => {\n\t\t\tsetImageError( true );\n\t\t};\n\n\t\t// Image or Text Avatar.\n\t\tconst textAvatar = ! url || imageError;\n\n\t\t// If image url is not provided, show children.\n\t\tconst Tag = textAvatar ? 'div' : 'img';\n\n\t\tuseEffect( () => {\n\t\t\tsetImageError( false );\n\t\t}, [ url ] );\n\n\t\treturn (\n\t\t\t<Tag\n\t\t\t\tref={ ref }\n\t\t\t\tclassName={ cn(\n\t\t\t\t\tbaseClassNames,\n\t\t\t\t\ttextAvatar && variantClassNames,\n\t\t\t\t\tsizeClassNames,\n\t\t\t\t\tborderClassNames,\n\t\t\t\t\tcontentClassNames,\n\t\t\t\t\tclassName\n\t\t\t\t) }\n\t\t\t\t{ ...( textAvatar\n\t\t\t\t\t? { children: getChildren() }\n\t\t\t\t\t: { src: url, alt, onError: handleImageError } ) }\n\t\t\t\t{ ...props }\n\t\t\t/>\n\t\t);\n\t}\n);\n\nexport default Avatar;\n"],"names":["Avatar","forwardRef","variant","size","border","url","alt","children","className","props","ref","imageError","setImageError","useState","effectiveBorder","baseClassNames","variantClassNames","sizeClassNames","borderClassNames","contentClassNames","getChildren","User","handleImageError","textAvatar","Tag","useEffect","jsx","cn"],"mappings":";;;;AAyBA,MAAMA,IAASC;AAAA,EACd,CACC;AAAA,IACC,SAAAC,IAAU;AAAA,IACV,MAAAC,IAAO;AAAA,IACP,QAAAC,IAAS;AAAA,IACT,KAAKC;AAAA,IACL,KAAAC;AAAA,IACA,UAAAC;AAAA,IACA,WAAAC;AAAA,IACA,GAAGC;AAAA,KAEJC,MACI;AACJ,UAAM,CAAEC,GAAYC,CAAc,IAAIC,EAAmB,EAAM,GAEzDC,IAAkBT,KAAOD,MAAW,SAAS,WAAWA,GACxDW,IACL,iEAEKC,IAAoB;AAAA,MACzB,OAAO;AAAA,MACP,MAAM;AAAA,MACN,SAAS;AAAA,MACT,iBAAiB;AAAA,MACjB,MAAM;AAAA,MACFd,CAAQ,GAEPe,IAAiB;AAAA,MACtB,KAAK;AAAA,MACL,IAAI;AAAA,MACJ,IAAI;AAAA,MACJ,IAAI;AAAA,MACJ,IAAI;AAAA,MACAd,CAAK,GAEJe,IAAmB;AAAA,MACxB,MAAM;AAAA,MACN,QAAQ;AAAA,MACR,MAAM;AAAA,MACFJ,CAAgB,GAEfK,IAAoBd,IAAM,+BAA+B,IAEzDe,IAAc,MAAM;AAEzB,UAAKf,KAAOM,GAAa;AACnB,YAAAL,KAAO,OAAOA,KAAQ;AACnB,iBAAAA,IAAO,CAAE,GAAG,YAAY;AACpB,YAAAC,KAAY,OAAOA,KAAa;AACpC,iBAAAA,IAAY,CAAE,GAAG,YAAY;AACzB,YAAA,CAAEA,KAAY,CAAED;AAC3B,mCAAQe,GAAK,EAAA;AAAA,MACd;AAID,aAAOd,IAGF,OAAOA,KAAa,WACjBA,IAAY,CAAE,GAAG,YAAY,IAE9BA,IALC;AAAA,IAMT,GAEMe,IAAmB,MAAM;AAC9B,MAAAV,EAAe,EAAK;AAAA,IACrB,GAGMW,IAAa,CAAElB,KAAOM,GAGtBa,IAAMD,IAAa,QAAQ;AAEjC,WAAAE,EAAW,MAAM;AAChB,MAAAb,EAAe,EAAM;AAAA,IAAA,GACnB,CAAEP,CAAI,CAAE,GAGV,gBAAAqB;AAAA,MAACF;AAAA,MAAA;AAAA,QACA,KAAAd;AAAA,QACA,WAAYiB;AAAA,UACXZ;AAAA,UACAQ,KAAcP;AAAA,UACdC;AAAA,UACAC;AAAA,UACAC;AAAA,UACAX;AAAA,QACD;AAAA,QACE,GAAKe,IACJ,EAAE,UAAUH,IACZ,IAAA,EAAE,KAAKf,GAAK,KAAAC,GAAK,SAASgB,EAAiB;AAAA,QAC5C,GAAGb;AAAA,MAAA;AAAA,IACN;AAAA,EAAA;AAGH;"}