"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("react/jsx-runtime"),a=require("react"),O=require("lodash"),i=require("../../utilities/functions.cjs.js"),V=require("lucide-react"),o=require("./styles.cjs.js"),x=require("@floating-ui/react"),G=require("../badge/badge.cjs.js"),K=require("../loader/loader.cjs.js"),T=a.createContext({}),S=()=>a.useContext(T),d=a.forwardRef(({className:s,size:e="sm",open:r=!1,onOpenChange:l=()=>{},loading:c=!1,...n},f)=>{const[u,m]=a.useState(""),[h,z]=a.useState(c??!1),{refs:p,floatingStyles:v,context:w}=x.useFloating({open:r,onOpenChange:l,placement:"bottom-start",whileElementsMounted:x.autoUpdate,middleware:[x.offset(e==="sm"?4:6),x.flip({padding:10}),x.size({apply({rects:g,elements:y,availableHeight:N}){y.floating.style.maxHeight=`${N}px`,y.floating.style.width=`${g.reference.width}px`,y.floating.style.fontFamily=window.getComputedStyle(y.reference).fontFamily}})]}),L=x.useDismiss(w),{getReferenceProps:E,getFloatingProps:q}=x.useInteractions([L]);return a.useEffect(()=>{const g=i.getOperatingSystem(),y=N=>{const k=g==="Mac OS"?N.metaKey:N.ctrlKey;if(N.key==="/"&&k&&(N.preventDefault(),p.reference&&p.reference.current)){const P=p.reference.current instanceof HTMLElement?p.reference.current.querySelector("input"):null;P&&P.focus()}};return window.addEventListener("keydown",y),()=>{window.removeEventListener("keydown",y)}},[p.reference]),t.jsx(T.Provider,{value:{size:e,open:r,onOpenChange:l,refs:p,floatingStyles:v,context:w,getReferenceProps:E,getFloatingProps:q,searchTerm:u,setSearchTerm:m,isLoading:h,setIsLoading:z},children:t.jsx("div",{className:i.cn("searchbox-wrapper box-border relative w-full",s),...n,ref:f})})});d.displayName="SearchBox";const I=a.forwardRef(({className:s,type:e="text",placeholder:r="Search...",variant:l="primary",disabled:c=!1,onChange:n=()=>{},...f},u)=>{const{size:m,onOpenChange:h,refs:z,getReferenceProps:p,searchTerm:v,setSearchTerm:w}=S(),L=m==="lg"?"sm":"xs",E=q=>{const g=q.target.value;w(g),n(g),typeof h=="function"&&(g.trim()?h(!0):h(!1))};return t.jsxs("div",{ref:z.setReference,className:i.cn("w-full group relative flex justify-center items-center gap-1.5 focus-within:z-10 transition-colors ease-in-out duration-150",o.variantClassNames[l],o.sizeClassNames.input[m],c?o.disabledClassNames[l]:"focus-within:ring-2 focus-within:ring-focus focus-within:ring-offset-2 focus-within:border-focus-border focus-within:hover:border-focus-border"),...p,children:[t.jsx("span",{className:i.cn(o.textSizeClassNames[m],c?"text-icon-disabled":o.iconClasses,"flex justify-center items-center"),children:t.jsx(V.Search,{})}),t.jsx("input",{type:e,ref:u,className:i.cn(o.textSizeClassNames[m],"flex-grow font-medium bg-transparent border-none outline-none border-transparent focus:ring-0 py-0",c?o.disabledClassNames[l]:["text-field-placeholder focus-within:text-field-input group-hover:text-field-input","placeholder:text-field-placeholder"],s),disabled:c,value:v,onChange:E,placeholder:r,...O.omit(f,["size","open","onOpenChange","loading"])}),t.jsx(G.default,{label:"âŒ˜/",size:L,type:"rounded",variant:"neutral"})]})});I.displayName="SearchBox.Input";const R=({className:s,dropdownPortalRoot:e=null,dropdownPortalId:r="",children:l,...c})=>{const{size:n,open:f,refs:u,floatingStyles:m,getFloatingProps:h}=S();return f?t.jsx(x.FloatingPortal,{id:r,root:e,children:t.jsx("div",{ref:u.setFloating,style:{...m},className:i.cn("bg-background-primary rounded-md border border-solid border-border-subtle shadow-soft-shadow-lg overflow-y-auto text-wrap",o.sizeClassNames.dialog[n],s),...h(),...c,children:l})}):null};R.displayName="SearchBox.Content";const F=({filter:s=!0,children:e})=>{const{searchTerm:r,isLoading:l}=S();if(!s)return t.jsx("div",{children:e});const c=a.Children.toArray(e).map(n=>{if(a.isValidElement(n)&&n.type===b){const f=a.Children.toArray(n.props.children).filter(u=>a.isValidElement(u)&&typeof u.props.children=="string"&&u.props.children.toLowerCase().includes(r.toLowerCase()));return f.length>0?a.cloneElement(n,{children:f}):null}return n}).filter(Boolean);return l?t.jsx(j,{}):t.jsx("div",{children:c.some(n=>a.isValidElement(n)&&n.type!==B)?c:t.jsx(C,{})})};F.displayName="SearchBox.List";const C=({children:s="No results found."})=>{const{size:e}=S();return t.jsx("div",{className:i.cn("flex justify-center items-center",o.sizeClassNames.item[e],"text-text-tertiary p-4"),children:s})};C.displayName="SearchBox.Empty";const b=({heading:s,children:e})=>{const{size:r}=S();return t.jsxs("div",{className:i.cn(o.sizeClassNames.content[r],o.sizeClassNames.item[r]),children:[s&&t.jsx("div",{className:i.cn(o.sizeClassNames.title[r],"text-text-secondary"),children:s}),e]})};b.displayName="SearchBox.Group";const M=a.forwardRef(({className:s,icon:e,children:r,...l},c)=>{const{size:n}=S();return t.jsxs("div",{ref:c,className:i.cn("flex items-center justify-start gap-1 p-1 hover:bg-background-secondary focus:bg-background-secondary cursor-pointer",o.sizeClassNames.item[n]),...l,children:[e&&t.jsx("span",{className:i.cn(o.sizeClassNames.icon[n],"flex items-center justify-center"),children:e}),t.jsx("span",{className:i.cn("flex-grow p-1 font-normal cursor-pointer",o.sizeClassNames.item[n],s),children:r})]})});M.displayName="SearchBox.Item";const j=({loadingIcon:s=t.jsx(K.Loader,{})})=>{const{size:e}=S(),r=a.isValidElement(s)?a.cloneElement(s,{size:e}):s;return t.jsx("div",{className:i.cn("flex justify-center p-4",o.textSizeClassNames[e],o.sizeClassNames.item[e]),children:r})};j.displayName="SearchBox.Loading";const B=a.forwardRef(({className:s,...e},r)=>t.jsx("hr",{ref:r,className:i.cn("border-0 border-t border-border-subtle border-solid m-0",s),...e}));B.displayName="SearchBox.Separator";d.Input=I;d.Loading=j;d.Separator=B;d.Content=R;d.List=F;d.Empty=C;d.Group=b;d.Item=M;exports.SearchBox=d;exports.SearchBoxContent=R;exports.SearchBoxEmpty=C;exports.SearchBoxGroup=b;exports.SearchBoxInput=I;exports.SearchBoxItem=M;exports.SearchBoxList=F;exports.SearchBoxLoading=j;exports.SearchBoxSeparator=B;exports.default=d;
//# sourceMappingURL=search.cjs.js.map
