{"version":3,"file":"table.es.js","sources":["../../../src/components/table/table.tsx"],"sourcesContent":["import { cn } from '@/utilities/functions';\nimport React, {\n\tChildren,\n\tcreateContext,\n\tuseContext,\n\ttype ReactNode,\n} from 'react';\nimport { Checkbox } from '@/components';\n\n/**\n * Common props for all table components.\n */\nexport interface TableCommonProps {\n\t/**\n\t * Children to render within the component.\n\t */\n\tchildren?: ReactNode;\n\t/**\n\t * Class name to apply to the component.\n\t */\n\tclassName?: string;\n}\n\n/**\n * Interface for table context.\n */\nexport interface TableContextType<T> {\n\t/**\n\t * Set of indices for selected rows.\n\t */\n\tselectedRows?: Set<number>;\n\t/**\n\t * Whether to show checkboxes for row selection.\n\t */\n\tcheckboxSelection?: boolean;\n\t/**\n\t * On checkbox selection change.\n\t */\n\tonChangeSelection?: ( checked: boolean, value: T ) => void;\n}\n\n/**\n * Interface for base table props.\n */\nexport interface BaseTableProps\n\textends TableCommonProps,\n\t\tOmit<React.HTMLAttributes<HTMLTableElement>, 'className' | 'children'> {\n\t/**\n\t * Child components to render within the table.\n\t *\n\t * @default undefined\n\t */\n\tchildren?: ReactNode;\n\t/**\n\t * Whether to show checkboxes for row selection.\n\t */\n\tcheckboxSelection?: boolean;\n}\n\n/**\n * Interface for table head props.\n */\nexport interface TableHeadProps\n\textends TableCommonProps,\n\t\tOmit<\n\t\t\tReact.HTMLAttributes<HTMLTableSectionElement>,\n\t\t\t'className' | 'children'\n\t\t> {\n\t/**\n\t * Child components to render within the table head.\n\t */\n\tchildren?: ReactNode;\n\t/**\n\t * Whether any of the rows are selected.\n\t */\n\tselected?: boolean;\n\n\t/**\n\t * Whether the checkbox is indeterminate.\n\t */\n\tindeterminate?: boolean;\n\n\t/**\n\t * Whether the checkbox is disabled.\n\t */\n\tdisabled?: boolean;\n\n\t/**\n\t * On checkbox change for bulk selection/deselection.\n\t *\n\t * @default undefined\n\t */\n\tonChangeSelection?: ( checked: boolean ) => void;\n}\n\n/**\n * Interface for table head cell props.\n */\nexport interface TableHeadCellProps\n\textends TableCommonProps,\n\t\tOmit<\n\t\t\tReact.HTMLAttributes<HTMLTableCellElement>,\n\t\t\t'className' | 'children'\n\t\t> {\n\t/**\n\t * Content to display in the header cell.\n\t */\n\tchildren?: ReactNode;\n}\n\n/**\n * Interface for table body props.\n */\nexport interface TableBodyProps\n\textends TableCommonProps,\n\t\tOmit<\n\t\t\tReact.HTMLAttributes<HTMLTableSectionElement>,\n\t\t\t'className' | 'children'\n\t\t> {\n\t/**\n\t * Child components to render within the table body.\n\t */\n\tchildren?: ReactNode;\n}\n\n/**\n * Interface for table row props.\n */\nexport interface TableRowProps<T>\n\textends TableCommonProps,\n\t\tOmit<\n\t\t\tReact.HTMLAttributes<HTMLTableRowElement>,\n\t\t\t'className' | 'children'\n\t\t> {\n\t/**\n\t * Child components to render within the table row.\n\t */\n\tchildren?: ReactNode;\n\t/**\n\t * value of the row.\n\t */\n\tvalue?: T | undefined;\n\t/**\n\t * Whether the row is selected.\n\t */\n\tselected?: boolean;\n\n\t/**\n\t * On checkbox selection change.\n\t */\n\tonChangeSelection?: ( checked: boolean, value: T ) => void;\n\n\t/**\n\t * Whether the row is disabled.\n\t */\n\tdisabled?: boolean;\n}\n\n/**\n * Interface for table cell props.\n */\nexport interface TableCellProps\n\textends TableCommonProps,\n\t\tOmit<\n\t\t\tReact.HTMLAttributes<HTMLTableCellElement>,\n\t\t\t'className' | 'children'\n\t\t> {\n\t/**\n\t * Content to display in the table cell.\n\t */\n\tchildren?: ReactNode;\n}\n\n/**\n * Interface for table footer props.\n */\nexport interface TableFooterProps\n\textends TableCommonProps,\n\t\tOmit<React.HTMLAttributes<HTMLDivElement>, 'className' | 'children'> {\n\t/**\n\t * Child components to render within the table footer.\n\t */\n\tchildren?: ReactNode;\n}\n\nconst TableContext = createContext<TableContextType<unknown> | undefined>(\n\tundefined\n);\n\nconst useTableContext = () => {\n\tconst context = useContext( TableContext );\n\tif ( ! context ) {\n\t\tthrow new Error( 'Table components must be used within Table component' );\n\t}\n\treturn context;\n};\n\nexport const Table = ( {\n\tchildren,\n\tclassName,\n\tcheckboxSelection = false,\n\t...props\n}: BaseTableProps ) => {\n\tconst contextValue: TableContextType<unknown> = {\n\t\tcheckboxSelection,\n\t};\n\n\t// Extract footer from children\n\tconst footer = Children.toArray( children ).find(\n\t\t( child ) => React.isValidElement( child ) && child.type === TableFooter\n\t);\n\tconst restChildren = Children.toArray( children ).filter(\n\t\t( child ) => React.isValidElement( child ) && child.type !== TableFooter\n\t);\n\treturn (\n\t\t<TableContext.Provider\n\t\t\tvalue={ contextValue as TableContextType<unknown> }\n\t\t>\n\t\t\t<div className=\"flow-root border-0.5 border-solid border-border-subtle rounded-md divide-y-0.5 divide-x-0 divide-solid divide-border-subtle overflow-hidden\">\n\t\t\t\t<div className=\"overflow-x-auto w-full\">\n\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t<table\n\t\t\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\t\t\t'table-fixed min-w-full border-collapse border-spacing-0',\n\t\t\t\t\t\t\t\tclassName\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ restChildren }\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{ footer }\n\t\t\t</div>\n\t\t</TableContext.Provider>\n\t);\n};\n\n// Head Components\nexport const TableHead: React.FC<TableHeadProps> = ( {\n\tchildren,\n\tclassName,\n\tselected,\n\tonChangeSelection,\n\tindeterminate,\n\tdisabled,\n\t...props\n} ) => {\n\tconst { checkboxSelection } = useTableContext();\n\n\tconst handleCheckboxChange = ( checked: boolean ) => {\n\t\tif ( typeof onChangeSelection !== 'function' ) {\n\t\t\treturn;\n\t\t}\n\t\tonChangeSelection( checked );\n\t};\n\n\treturn (\n\t\t<thead\n\t\t\tclassName={ cn(\n\t\t\t\t'bg-background-secondary border-x-0 border-t-0 border-b-0.5 border-solid border-border-subtle',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t<tr>\n\t\t\t\t{ checkboxSelection && (\n\t\t\t\t\t<th\n\t\t\t\t\t\tscope=\"col\"\n\t\t\t\t\t\tclassName=\"relative px-5.5 w-11 overflow-hidden\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"absolute inset-0 grid grid-cols-1 place-content-center\">\n\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\tchecked={ selected }\n\t\t\t\t\t\t\t\tindeterminate={ indeterminate }\n\t\t\t\t\t\t\t\tdisabled={ disabled }\n\t\t\t\t\t\t\t\tonChange={ handleCheckboxChange }\n\t\t\t\t\t\t\t\taria-label={\n\t\t\t\t\t\t\t\t\tselected ? 'Deselect all' : 'Select all'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</th>\n\t\t\t\t) }\n\t\t\t\t{ children }\n\t\t\t</tr>\n\t\t</thead>\n\t);\n};\n\nexport const TableHeadCell: React.FC<TableHeadCellProps> = ( {\n\tchildren,\n\tclassName,\n\t...props\n} ) => {\n\treturn (\n\t\t<th\n\t\t\tscope=\"col\"\n\t\t\tclassName={ cn(\n\t\t\t\t'p-3 text-left text-sm font-medium leading-5 text-text-primary',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ children }\n\t\t</th>\n\t);\n};\n\n// Body Components\nexport const TableBody: React.FC<TableBodyProps> = ( {\n\tchildren,\n\tclassName,\n\t...props\n} ) => {\n\treturn (\n\t\t<tbody\n\t\t\tclassName={ cn(\n\t\t\t\t'bg-background-primary divide-y-0.5 divide-x-0 divide-solid divide-border-subtle',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ children }\n\t\t</tbody>\n\t);\n};\n\nexport const TableRow = <T, >( {\n\tchildren,\n\tselected,\n\tvalue,\n\tclassName,\n\tonChangeSelection,\n\t...props\n}: TableRowProps<T> ) => {\n\tconst { checkboxSelection } = useTableContext();\n\n\tconst handleCheckboxChange = ( checked: boolean ) => {\n\t\tif ( typeof onChangeSelection !== 'function' ) {\n\t\t\treturn;\n\t\t}\n\t\tonChangeSelection( checked, value as T );\n\t};\n\n\treturn (\n\t\t<tr\n\t\t\tclassName={ cn(\n\t\t\t\t'hover:bg-background-secondary',\n\t\t\t\tselected && 'bg-background-secondary',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ checkboxSelection && (\n\t\t\t\t<td className=\"relative px-5.5 w-11 overflow-hidden\">\n\t\t\t\t\t<div className=\"absolute inset-0 grid grid-cols-1 place-content-center\">\n\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\tchecked={ selected }\n\t\t\t\t\t\t\tonChange={ handleCheckboxChange }\n\t\t\t\t\t\t\taria-label=\"Select row\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</td>\n\t\t\t) }\n\t\t\t{ children }\n\t\t</tr>\n\t);\n};\n\nexport const TableCell: React.FC<TableCellProps> = ( {\n\tchildren,\n\tclassName,\n\t...props\n} ) => {\n\treturn (\n\t\t<td\n\t\t\tclassName={ cn(\n\t\t\t\t'px-3 py-3.5 text-sm font-normal leading-5 text-text-secondary',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ children }\n\t\t</td>\n\t);\n};\n\n// Table Footer\nexport const TableFooter: React.FC<TableFooterProps> = ( {\n\tchildren,\n\tclassName,\n\t...props\n} ) => {\n\tconst { checkboxSelection } = useTableContext();\n\treturn (\n\t\t<div\n\t\t\tclassName={ cn( 'px-3 py-3', checkboxSelection && 'px-4', className ) }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ children }\n\t\t</div>\n\t);\n};\n\n// Update display name\nTable.displayName = 'Table';\nTableHead.displayName = 'Table.Head';\nTableHeadCell.displayName = 'Table.HeadCell';\nTableBody.displayName = 'Table.Body';\nTableRow.displayName = 'Table.Row';\nTableCell.displayName = 'Table.Cell';\nTableFooter.displayName = 'Table.Footer';\n\n// Assign compound components\nTable.Head = TableHead;\nTable.HeadCell = TableHeadCell;\nTable.Body = TableBody;\nTable.Row = TableRow;\nTable.Cell = TableCell;\nTable.Footer = TableFooter;\n\nexport default Table;\n"],"names":["TableContext","createContext","useTableContext","context","useContext","Table","children","className","checkboxSelection","props","contextValue","footer","Children","child","React","TableFooter","restChildren","jsx","jsxs","cn","TableHead","selected","onChangeSelection","indeterminate","disabled","handleCheckboxChange","checked","Checkbox","TableHeadCell","TableBody","TableRow","value","TableCell"],"mappings":"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"}