{"version":3,"file":"table.cjs.js","sources":["../../../src/components/table/table.tsx"],"sourcesContent":["import { cn } from '@/utilities/functions';\nimport React, {\n\tChildren,\n\tcreateContext,\n\tuseContext,\n\ttype ReactNode,\n} from 'react';\nimport { Checkbox } from '@/components';\n\n/**\n * Common props for all table components.\n */\nexport interface TableCommonProps {\n\t/**\n\t * Children to render within the component.\n\t */\n\tchildren?: ReactNode;\n\t/**\n\t * Class name to apply to the component.\n\t */\n\tclassName?: string;\n}\n\n/**\n * Interface for table context.\n */\nexport interface TableContextType<T> {\n\t/**\n\t * Set of indices for selected rows.\n\t */\n\tselectedRows?: Set<number>;\n\t/**\n\t * Whether to show checkboxes for row selection.\n\t */\n\tcheckboxSelection?: boolean;\n\t/**\n\t * On checkbox selection change.\n\t */\n\tonChangeSelection?: ( checked: boolean, value: T ) => void;\n}\n\n/**\n * Interface for base table props.\n */\nexport interface BaseTableProps\n\textends TableCommonProps,\n\t\tOmit<React.HTMLAttributes<HTMLTableElement>, 'className' | 'children'> {\n\t/**\n\t * Child components to render within the table.\n\t *\n\t * @default undefined\n\t */\n\tchildren?: ReactNode;\n\t/**\n\t * Whether to show checkboxes for row selection.\n\t */\n\tcheckboxSelection?: boolean;\n}\n\n/**\n * Interface for table head props.\n */\nexport interface TableHeadProps\n\textends TableCommonProps,\n\t\tOmit<\n\t\t\tReact.HTMLAttributes<HTMLTableSectionElement>,\n\t\t\t'className' | 'children'\n\t\t> {\n\t/**\n\t * Child components to render within the table head.\n\t */\n\tchildren?: ReactNode;\n\t/**\n\t * Whether any of the rows are selected.\n\t */\n\tselected?: boolean;\n\n\t/**\n\t * Whether the checkbox is indeterminate.\n\t */\n\tindeterminate?: boolean;\n\n\t/**\n\t * Whether the checkbox is disabled.\n\t */\n\tdisabled?: boolean;\n\n\t/**\n\t * On checkbox change for bulk selection/deselection.\n\t *\n\t * @default undefined\n\t */\n\tonChangeSelection?: ( checked: boolean ) => void;\n}\n\n/**\n * Interface for table head cell props.\n */\nexport interface TableHeadCellProps\n\textends TableCommonProps,\n\t\tOmit<\n\t\t\tReact.HTMLAttributes<HTMLTableCellElement>,\n\t\t\t'className' | 'children'\n\t\t> {\n\t/**\n\t * Content to display in the header cell.\n\t */\n\tchildren?: ReactNode;\n}\n\n/**\n * Interface for table body props.\n */\nexport interface TableBodyProps\n\textends TableCommonProps,\n\t\tOmit<\n\t\t\tReact.HTMLAttributes<HTMLTableSectionElement>,\n\t\t\t'className' | 'children'\n\t\t> {\n\t/**\n\t * Child components to render within the table body.\n\t */\n\tchildren?: ReactNode;\n}\n\n/**\n * Interface for table row props.\n */\nexport interface TableRowProps<T>\n\textends TableCommonProps,\n\t\tOmit<\n\t\t\tReact.HTMLAttributes<HTMLTableRowElement>,\n\t\t\t'className' | 'children'\n\t\t> {\n\t/**\n\t * Child components to render within the table row.\n\t */\n\tchildren?: ReactNode;\n\t/**\n\t * value of the row.\n\t */\n\tvalue?: T | undefined;\n\t/**\n\t * Whether the row is selected.\n\t */\n\tselected?: boolean;\n\n\t/**\n\t * On checkbox selection change.\n\t */\n\tonChangeSelection?: ( checked: boolean, value: T ) => void;\n\n\t/**\n\t * Whether the row is disabled.\n\t */\n\tdisabled?: boolean;\n}\n\n/**\n * Interface for table cell props.\n */\nexport interface TableCellProps\n\textends TableCommonProps,\n\t\tOmit<\n\t\t\tReact.HTMLAttributes<HTMLTableCellElement>,\n\t\t\t'className' | 'children'\n\t\t> {\n\t/**\n\t * Content to display in the table cell.\n\t */\n\tchildren?: ReactNode;\n}\n\n/**\n * Interface for table footer props.\n */\nexport interface TableFooterProps\n\textends TableCommonProps,\n\t\tOmit<React.HTMLAttributes<HTMLDivElement>, 'className' | 'children'> {\n\t/**\n\t * Child components to render within the table footer.\n\t */\n\tchildren?: ReactNode;\n}\n\nconst TableContext = createContext<TableContextType<unknown> | undefined>(\n\tundefined\n);\n\nconst useTableContext = () => {\n\tconst context = useContext( TableContext );\n\tif ( ! context ) {\n\t\tthrow new Error( 'Table components must be used within Table component' );\n\t}\n\treturn context;\n};\n\nexport const Table = ( {\n\tchildren,\n\tclassName,\n\tcheckboxSelection = false,\n\t...props\n}: BaseTableProps ) => {\n\tconst contextValue: TableContextType<unknown> = {\n\t\tcheckboxSelection,\n\t};\n\n\t// Extract footer from children\n\tconst footer = Children.toArray( children ).find(\n\t\t( child ) => React.isValidElement( child ) && child.type === TableFooter\n\t);\n\tconst restChildren = Children.toArray( children ).filter(\n\t\t( child ) => React.isValidElement( child ) && child.type !== TableFooter\n\t);\n\treturn (\n\t\t<TableContext.Provider\n\t\t\tvalue={ contextValue as TableContextType<unknown> }\n\t\t>\n\t\t\t<div className=\"flow-root border-0.5 border-solid border-border-subtle rounded-md divide-y-0.5 divide-x-0 divide-solid divide-border-subtle overflow-hidden\">\n\t\t\t\t<div className=\"overflow-x-auto w-full\">\n\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t<table\n\t\t\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\t\t\t'table-fixed min-w-full border-collapse border-spacing-0',\n\t\t\t\t\t\t\t\tclassName\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ restChildren }\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{ footer }\n\t\t\t</div>\n\t\t</TableContext.Provider>\n\t);\n};\n\n// Head Components\nexport const TableHead: React.FC<TableHeadProps> = ( {\n\tchildren,\n\tclassName,\n\tselected,\n\tonChangeSelection,\n\tindeterminate,\n\tdisabled,\n\t...props\n} ) => {\n\tconst { checkboxSelection } = useTableContext();\n\n\tconst handleCheckboxChange = ( checked: boolean ) => {\n\t\tif ( typeof onChangeSelection !== 'function' ) {\n\t\t\treturn;\n\t\t}\n\t\tonChangeSelection( checked );\n\t};\n\n\treturn (\n\t\t<thead\n\t\t\tclassName={ cn(\n\t\t\t\t'bg-background-secondary border-x-0 border-t-0 border-b-0.5 border-solid border-border-subtle',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t<tr>\n\t\t\t\t{ checkboxSelection && (\n\t\t\t\t\t<th\n\t\t\t\t\t\tscope=\"col\"\n\t\t\t\t\t\tclassName=\"relative px-5.5 w-11 overflow-hidden\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"absolute inset-0 grid grid-cols-1 place-content-center\">\n\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\tchecked={ selected }\n\t\t\t\t\t\t\t\tindeterminate={ indeterminate }\n\t\t\t\t\t\t\t\tdisabled={ disabled }\n\t\t\t\t\t\t\t\tonChange={ handleCheckboxChange }\n\t\t\t\t\t\t\t\taria-label={\n\t\t\t\t\t\t\t\t\tselected ? 'Deselect all' : 'Select all'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</th>\n\t\t\t\t) }\n\t\t\t\t{ children }\n\t\t\t</tr>\n\t\t</thead>\n\t);\n};\n\nexport const TableHeadCell: React.FC<TableHeadCellProps> = ( {\n\tchildren,\n\tclassName,\n\t...props\n} ) => {\n\treturn (\n\t\t<th\n\t\t\tscope=\"col\"\n\t\t\tclassName={ cn(\n\t\t\t\t'p-3 text-left text-sm font-medium leading-5 text-text-primary',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ children }\n\t\t</th>\n\t);\n};\n\n// Body Components\nexport const TableBody: React.FC<TableBodyProps> = ( {\n\tchildren,\n\tclassName,\n\t...props\n} ) => {\n\treturn (\n\t\t<tbody\n\t\t\tclassName={ cn(\n\t\t\t\t'bg-background-primary divide-y-0.5 divide-x-0 divide-solid divide-border-subtle',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ children }\n\t\t</tbody>\n\t);\n};\n\nexport const TableRow = <T, >( {\n\tchildren,\n\tselected,\n\tvalue,\n\tclassName,\n\tonChangeSelection,\n\t...props\n}: TableRowProps<T> ) => {\n\tconst { checkboxSelection } = useTableContext();\n\n\tconst handleCheckboxChange = ( checked: boolean ) => {\n\t\tif ( typeof onChangeSelection !== 'function' ) {\n\t\t\treturn;\n\t\t}\n\t\tonChangeSelection( checked, value as T );\n\t};\n\n\treturn (\n\t\t<tr\n\t\t\tclassName={ cn(\n\t\t\t\t'hover:bg-background-secondary',\n\t\t\t\tselected && 'bg-background-secondary',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ checkboxSelection && (\n\t\t\t\t<td className=\"relative px-5.5 w-11 overflow-hidden\">\n\t\t\t\t\t<div className=\"absolute inset-0 grid grid-cols-1 place-content-center\">\n\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\tchecked={ selected }\n\t\t\t\t\t\t\tonChange={ handleCheckboxChange }\n\t\t\t\t\t\t\taria-label=\"Select row\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</td>\n\t\t\t) }\n\t\t\t{ children }\n\t\t</tr>\n\t);\n};\n\nexport const TableCell: React.FC<TableCellProps> = ( {\n\tchildren,\n\tclassName,\n\t...props\n} ) => {\n\treturn (\n\t\t<td\n\t\t\tclassName={ cn(\n\t\t\t\t'px-3 py-3.5 text-sm font-normal leading-5 text-text-secondary',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ children }\n\t\t</td>\n\t);\n};\n\n// Table Footer\nexport const TableFooter: React.FC<TableFooterProps> = ( {\n\tchildren,\n\tclassName,\n\t...props\n} ) => {\n\tconst { checkboxSelection } = useTableContext();\n\treturn (\n\t\t<div\n\t\t\tclassName={ cn( 'px-3 py-3', checkboxSelection && 'px-4', className ) }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ children }\n\t\t</div>\n\t);\n};\n\n// Update display name\nTable.displayName = 'Table';\nTableHead.displayName = 'Table.Head';\nTableHeadCell.displayName = 'Table.HeadCell';\nTableBody.displayName = 'Table.Body';\nTableRow.displayName = 'Table.Row';\nTableCell.displayName = 'Table.Cell';\nTableFooter.displayName = 'Table.Footer';\n\n// Assign compound components\nTable.Head = TableHead;\nTable.HeadCell = TableHeadCell;\nTable.Body = TableBody;\nTable.Row = TableRow;\nTable.Cell = TableCell;\nTable.Footer = TableFooter;\n\nexport default Table;\n"],"names":["TableContext","createContext","useTableContext","context","useContext","Table","children","className","checkboxSelection","props","contextValue","footer","Children","child","React","TableFooter","restChildren","jsx","jsxs","cn","TableHead","selected","onChangeSelection","indeterminate","disabled","handleCheckboxChange","checked","Checkbox","TableHeadCell","TableBody","TableRow","value","TableCell"],"mappings":"2PAyLMA,EAAeC,EAAAA,cACpB,MACD,EAEMC,EAAkB,IAAM,CAC7B,MAAMC,EAAUC,EAAAA,WAAYJ,CAAa,EACzC,GAAK,CAAEG,EACN,MAAM,IAAI,MAAO,sDAAuD,EAEzE,OAAOA,CACR,EAEaE,EAAQ,CAAE,CACtB,SAAAC,EACA,UAAAC,EACA,kBAAAC,EAAoB,GACpB,GAAGC,CACJ,IAAuB,CACtB,MAAMC,EAA0C,CAC/C,kBAAAF,CAAA,EAIKG,EAASC,EAAAA,SAAS,QAASN,CAAS,EAAE,KACzCO,GAAWC,EAAM,eAAgBD,CAAM,GAAKA,EAAM,OAASE,CAAA,EAExDC,EAAeJ,EAAAA,SAAS,QAASN,CAAS,EAAE,OAC/CO,GAAWC,EAAM,eAAgBD,CAAM,GAAKA,EAAM,OAASE,CAAA,EAE9D,OACCE,EAAAA,IAACjB,EAAa,SAAb,CACA,MAAQU,EAER,SAAAQ,EAAAA,KAAC,MAAA,CAAI,UAAU,8IACd,SAAA,CAAAD,EAAAA,IAAC,OAAI,UAAU,yBACd,SAAAA,MAAC,MAAA,CAAI,UAAU,WACd,SAAAA,EAAAA,IAAC,QAAA,CACA,UAAYE,EAAAA,GACX,0DACAZ,CAAA,EAEC,GAAGE,EAEH,SAAAO,CAAA,CAAA,EAEJ,CAAA,CACD,EACEL,CAAA,CAAA,CACH,CAAA,CAAA,CAGH,EAGaS,EAAsC,CAAE,CACpD,SAAAd,EACA,UAAAC,EACA,SAAAc,EACA,kBAAAC,EACA,cAAAC,EACA,SAAAC,EACA,GAAGf,CACJ,IAAO,CACN,KAAM,CAAE,kBAAAD,CAAA,EAAsBN,EAAA,EAExBuB,EAAyBC,GAAsB,CAC/C,OAAOJ,GAAsB,YAGlCA,EAAmBI,CAAQ,CAC5B,EAEA,OACCT,EAAAA,IAAC,QAAA,CACA,UAAYE,EAAAA,GACX,+FACAZ,CAAA,EAEC,GAAGE,EAEL,gBAAC,KAAA,CACE,SAAA,CAAAD,GACDS,EAAAA,IAAC,KAAA,CACA,MAAM,MACN,UAAU,uCAEV,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,yDACd,SAAAA,EAAAA,IAACU,EAAAA,QAAA,CACA,KAAK,KACL,QAAUN,EACV,cAAAE,EACA,SAAAC,EACA,SAAWC,EACX,aACCJ,EAAW,eAAiB,YAAA,CAAA,CAE9B,CACD,CAAA,CAAA,EAGAf,CAAA,CAAA,CACH,CAAA,CAAA,CAGH,EAEasB,EAA8C,CAAE,CAC5D,SAAAtB,EACA,UAAAC,EACA,GAAGE,CACJ,IAEEQ,EAAAA,IAAC,KAAA,CACA,MAAM,MACN,UAAYE,EAAAA,GACX,gEACAZ,CAAA,EAEC,GAAGE,EAEH,SAAAH,CAAA,CAAA,EAMQuB,EAAsC,CAAE,CACpD,SAAAvB,EACA,UAAAC,EACA,GAAGE,CACJ,IAEEQ,EAAAA,IAAC,QAAA,CACA,UAAYE,EAAAA,GACX,kFACAZ,CAAA,EAEC,GAAGE,EAEH,SAAAH,CAAA,CAAA,EAKQwB,EAAW,CAAO,CAC9B,SAAAxB,EACA,SAAAe,EACA,MAAAU,EACA,UAAAxB,EACA,kBAAAe,EACA,GAAGb,CACJ,IAAyB,CACxB,KAAM,CAAE,kBAAAD,CAAA,EAAsBN,EAAA,EAExBuB,EAAyBC,GAAsB,CAC/C,OAAOJ,GAAsB,YAGlCA,EAAmBI,EAASK,CAAW,CACxC,EAEA,OACCb,EAAAA,KAAC,KAAA,CACA,UAAYC,EAAAA,GACX,gCACAE,GAAY,0BACZd,CAAA,EAEC,GAAGE,EAEH,SAAA,CAAAD,SACA,KAAA,CAAG,UAAU,uCACb,SAAAS,EAAAA,IAAC,MAAA,CAAI,UAAU,yDACd,SAAAA,EAAAA,IAACU,EAAAA,QAAA,CACA,KAAK,KACL,QAAUN,EACV,SAAWI,EACX,aAAW,YAAA,CAAA,EAEb,CAAA,CACD,EAECnB,CAAA,CAAA,CAAA,CAGL,EAEa0B,EAAsC,CAAE,CACpD,SAAA1B,EACA,UAAAC,EACA,GAAGE,CACJ,IAEEQ,EAAAA,IAAC,KAAA,CACA,UAAYE,EAAAA,GACX,gEACAZ,CAAA,EAEC,GAAGE,EAEH,SAAAH,CAAA,CAAA,EAMQS,EAA0C,CAAE,CACxD,SAAAT,EACA,UAAAC,EACA,GAAGE,CACJ,IAAO,CACN,KAAM,CAAE,kBAAAD,CAAA,EAAsBN,EAAA,EAC9B,OACCe,EAAAA,IAAC,MAAA,CACA,UAAYE,EAAAA,GAAI,YAAaX,GAAqB,OAAQD,CAAU,EAClE,GAAGE,EAEH,SAAAH,CAAA,CAAA,CAGL,EAGAD,EAAM,YAAc,QACpBe,EAAU,YAAc,aACxBQ,EAAc,YAAc,iBAC5BC,EAAU,YAAc,aACxBC,EAAS,YAAc,YACvBE,EAAU,YAAc,aACxBjB,EAAY,YAAc,eAG1BV,EAAM,KAAOe,EACbf,EAAM,SAAWuB,EACjBvB,EAAM,KAAOwB,EACbxB,EAAM,IAAMyB,EACZzB,EAAM,KAAO2B,EACb3B,EAAM,OAASU"}