{"version":3,"file":"editor-input.cjs.js","sources":["../../../src/components/editor-input/editor-input.tsx"],"sourcesContent":["import { AutoFocusPlugin } from '@lexical/react/LexicalAutoFocusPlugin';\nimport { LexicalComposer } from '@lexical/react/LexicalComposer';\nimport { PlainTextPlugin } from '@lexical/react/LexicalPlainTextPlugin';\nimport { ContentEditable } from '@lexical/react/LexicalContentEditable';\nimport { HistoryPlugin } from '@lexical/react/LexicalHistoryPlugin';\nimport { LexicalErrorBoundary } from '@lexical/react/LexicalErrorBoundary';\nimport { OnChangePlugin } from '@lexical/react/LexicalOnChangePlugin';\nimport { EditorRefPlugin } from '@lexical/react/LexicalEditorRefPlugin';\nimport { cn } from '@/utilities/functions';\nimport {\n\teditableContentAreaCommonClassNames,\n\teditorCommonClassNames,\n\teditorDisabledClassNames,\n\teditorInputClassNames,\n} from './editor-input-style';\nimport MentionPlugin, {\n\ttype TMenuComponent,\n\ttype TMenuItemComponent,\n} from './mention-plugin/mention-plugin';\nimport MentionNode from './mention-plugin/mention-node';\nimport editorTheme from './editor-theme';\nimport EditorPlaceholder from './editor-placeholder';\nimport { forwardRef, isValidElement } from 'react';\nimport OverrideEditorStyle from './override-editor-style-plugin';\nimport CharacterLimit from './character-limit-plugin';\nimport type { EditorState, LexicalEditor } from 'lexical';\n\nfunction onError( error: Error ) {\n\t// eslint-disable-next-line no-console\n\tconsole.error( error );\n}\n\nconst EMPTY_CONTENT = `{\n    \"root\": {\n        \"children\": [\n            {\n                \"children\": [],\n                \"direction\": null,\n                \"format\": \"\",\n                \"indent\": 0,\n                \"type\": \"paragraph\",\n                \"version\": 1,\n                \"textFormat\": 0,\n                \"textStyle\": \"\"\n            }\n        ],\n        \"direction\": null,\n        \"format\": \"\",\n        \"indent\": 0,\n        \"type\": \"root\",\n        \"version\": 1\n    }\n}`;\n\nexport type TOptionItem = Record<string, unknown> | string;\n\ninterface EditorInputProps<T = TOptionItem> {\n\t/** Default value for the editor input field. */\n\tdefaultValue?: string;\n\t/** Placeholder text for the editor input field. */\n\tplaceholder?: string;\n\t/** Callback function that is called when the value of the input changes. The function receives the updated value as an argument. */\n\tonChange?: ( editorState: EditorState, editor: LexicalEditor ) => void;\n\t/** Defines the sizes of the editor input. */\n\tsize?: keyof typeof editorInputClassNames;\n\t/** Defines if the editor input is focused automatically. */\n\tautoFocus?: boolean;\n\t/** Array of options to be displayed in the editor input. Each option should be an object  or string. */\n\toptions: T[];\n\t/** The key to be used to display the label of the option in the editor input and in the editor after selecting any mention/tag option. */\n\tby?: T extends Record<string, unknown> ? keyof T : string;\n\t/** The trigger to be used to show the mention options. */\n\ttrigger?: string;\n\t/** The component to be used for the mention menu. */\n\tmenuComponent?: TMenuComponent;\n\t/** The component to be used for the mention menu items. */\n\tmenuItemComponent?: TMenuItemComponent;\n\t/** Additional class names to be added to the editor input. */\n\tclassName?: string;\n\t/** Additional class names to be added to the editor input wrapper. */\n\twrapperClassName?: string;\n\t/** Defines if the editor input is disabled. */\n\tdisabled?: boolean;\n\t/** Defines if the editor input should add a space after selecting a mention/tag option. */\n\tautoSpaceAfterMention?: boolean;\n\t/**\n\t * Override the default styles of the editor input.\n\t * This prop allows you to apply custom styles using a React.CSSProperties object.\n\t * Note that the editor utilizes inline styles, so to effectively override existing styles,\n\t * you must provide the desired styles through this `style` prop.\n\t *\n\t */\n\tstyle?: React.CSSProperties;\n\t/** Defines the maximum character limit of the editor input. */\n\tmaxLength?: number;\n}\n\ntype Ref = React.Ref<LexicalEditor>;\n\nconst EditorInput = forwardRef<LexicalEditor, EditorInputProps>(\n\t(\n\t\t{\n\t\t\tdefaultValue = '',\n\t\t\tplaceholder = 'Press @ to view variable suggestions',\n\t\t\tonChange,\n\t\t\tsize = 'md',\n\t\t\tautoFocus = false,\n\t\t\toptions,\n\t\t\tby = 'name',\n\t\t\ttrigger = '@',\n\t\t\tmenuComponent,\n\t\t\tmenuItemComponent,\n\t\t\tclassName,\n\t\t\twrapperClassName,\n\t\t\tdisabled = false,\n\t\t\tautoSpaceAfterMention = false,\n\t\t\tstyle,\n\t\t\tmaxLength,\n\t\t}: EditorInputProps,\n\t\tref: Ref\n\t) => {\n\t\tconst initialConfig = {\n\t\t\tnamespace: 'Editor',\n\t\t\teditorTheme,\n\t\t\tonError,\n\t\t\tnodes: [ MentionNode ],\n\t\t\teditorState: defaultValue ? defaultValue : EMPTY_CONTENT,\n\t\t\teditable: disabled ? false : true,\n\t\t};\n\n\t\tconst handleOnChange = (\n\t\t\teditorState: EditorState,\n\t\t\teditor: LexicalEditor\n\t\t) => {\n\t\t\tif ( typeof onChange !== 'function' ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tonChange( editorState, editor );\n\t\t};\n\n\t\tlet menuComponentToUse;\n\t\tlet menuItemComponentToUse;\n\t\tif ( isValidElement( menuComponent ) ) {\n\t\t\tmenuComponentToUse = menuComponent;\n\t\t}\n\t\tif ( isValidElement( menuItemComponent ) ) {\n\t\t\tmenuItemComponentToUse = menuItemComponent;\n\t\t}\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={ cn(\n\t\t\t\t\t'relative w-full',\n\t\t\t\t\teditorCommonClassNames,\n\t\t\t\t\teditorInputClassNames[ size ],\n\t\t\t\t\tdisabled && editorDisabledClassNames,\n\t\t\t\t\twrapperClassName\n\t\t\t\t) }\n\t\t\t>\n\t\t\t\t<LexicalComposer initialConfig={ initialConfig }>\n\t\t\t\t\t<div className=\"relative w-full [&_p]:m-0\">\n\t\t\t\t\t\t<PlainTextPlugin\n\t\t\t\t\t\t\tcontentEditable={\n\t\t\t\t\t\t\t\t<ContentEditable\n\t\t\t\t\t\t\t\t\tclassName={ cn(\n\t\t\t\t\t\t\t\t\t\t'editor-content focus-visible:outline-none outline-none',\n\t\t\t\t\t\t\t\t\t\teditableContentAreaCommonClassNames,\n\t\t\t\t\t\t\t\t\t\tclassName\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplaceholder={\n\t\t\t\t\t\t\t\t<EditorPlaceholder content={ placeholder } />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tErrorBoundary={ LexicalErrorBoundary }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<HistoryPlugin />\n\t\t\t\t\t<MentionPlugin\n\t\t\t\t\t\tmenuComponent={ menuComponentToUse }\n\t\t\t\t\t\tmenuItemComponent={ menuItemComponentToUse }\n\t\t\t\t\t\tsize={ size }\n\t\t\t\t\t\tby={ by }\n\t\t\t\t\t\toptionsArray={ options }\n\t\t\t\t\t\ttrigger={ trigger }\n\t\t\t\t\t\tautoSpace={ autoSpaceAfterMention }\n\t\t\t\t\t/>\n\t\t\t\t\t<OnChangePlugin\n\t\t\t\t\t\tonChange={ handleOnChange }\n\t\t\t\t\t\tignoreSelectionChange\n\t\t\t\t\t/>\n\t\t\t\t\t{ ref && <EditorRefPlugin editorRef={ ref } /> }\n\t\t\t\t\t{ autoFocus && <AutoFocusPlugin /> }\n\t\t\t\t\t<OverrideEditorStyle style={ style } />\n\t\t\t\t\t{ maxLength && <CharacterLimit maxLength={ maxLength } /> }\n\t\t\t\t</LexicalComposer>\n\t\t\t</div>\n\t\t);\n\t}\n);\nEditorInput.displayName = 'EditorInput';\n\nexport default EditorInput;\n"],"names":["onError","error","EMPTY_CONTENT","EditorInput","forwardRef","defaultValue","placeholder","onChange","size","autoFocus","options","by","trigger","menuComponent","menuItemComponent","className","wrapperClassName","disabled","autoSpaceAfterMention","style","maxLength","ref","initialConfig","editorTheme","MentionNode","handleOnChange","editorState","editor","menuComponentToUse","menuItemComponentToUse","isValidElement","jsx","cn","editorCommonClassNames","editorInputClassNames","editorDisabledClassNames","jsxs","LexicalComposer","PlainTextPlugin","ContentEditable","editableContentAreaCommonClassNames","EditorPlaceholder","LexicalErrorBoundary","HistoryPlugin","MentionPlugin","OnChangePlugin","EditorRefPlugin","AutoFocusPlugin","OverrideEditorStyle","CharacterLimit"],"mappings":"+7BA2BA,SAASA,EAASC,EAAe,CAEhC,QAAQ,MAAOA,CAAM,CACtB,CAEA,MAAMC,EAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAmEhBC,EAAcC,EAAAA,WACnB,CACC,CACC,aAAAC,EAAe,GACf,YAAAC,EAAc,uCACd,SAAAC,EACA,KAAAC,EAAO,KACP,UAAAC,EAAY,GACZ,QAAAC,EACA,GAAAC,EAAK,OACL,QAAAC,EAAU,IACV,cAAAC,EACA,kBAAAC,EACA,UAAAC,EACA,iBAAAC,EACA,SAAAC,EAAW,GACX,sBAAAC,EAAwB,GACxB,MAAAC,EACA,UAAAC,CAAA,EAEDC,IACI,CACJ,MAAMC,EAAgB,CACrB,UAAW,SAAA,YACXC,EAAAA,QACA,QAAAvB,EACA,MAAO,CAAEwB,EAAAA,OAAY,EACrB,YAAanB,GAA8BH,EAC3C,SAAU,CAAAe,CAAmB,EAGxBQ,EAAiB,CACtBC,EACAC,IACI,CACC,OAAOpB,GAAa,YAGzBA,EAAUmB,EAAaC,CAAO,CAC/B,EAEA,IAAIC,EACAC,EACJ,OAAKC,EAAAA,eAAgBjB,CAAc,IAClCe,EAAqBf,GAEjBiB,EAAAA,eAAgBhB,CAAkB,IACtCe,EAAyBf,GAIzBiB,EAAAA,IAAC,MAAA,CACA,UAAYC,EAAAA,GACX,kBACAC,EAAAA,uBACAC,EAAAA,sBAAuB1B,CAAK,EAC5BS,GAAYkB,EAAAA,yBACZnB,CAAA,EAGD,SAAAoB,EAAAA,KAACC,EAAAA,iBAAgB,cAAAf,EAChB,SAAA,CAAAS,EAAAA,IAAC,MAAA,CAAI,UAAU,4BACd,SAAAA,EAAAA,IAACO,EAAAA,gBAAA,CACA,gBACCP,EAAAA,IAACQ,EAAAA,gBAAA,CACA,UAAYP,EAAAA,GACX,yDACAQ,EAAAA,oCACAzB,CAAA,CACD,CAAA,EAGF,YACCgB,EAAAA,IAACU,EAAAA,QAAA,CAAkB,QAAUnC,CAAA,CAAc,EAE5C,cAAgBoC,EAAAA,oBAAA,CAAA,EAElB,QACCC,EAAAA,cAAA,EAAc,EACfZ,EAAAA,IAACa,EAAAA,QAAA,CACA,cAAgBhB,EAChB,kBAAoBC,EACpB,KAAArB,EACA,GAAAG,EACA,aAAeD,EACf,QAAAE,EACA,UAAYM,CAAA,CAAA,EAEba,EAAAA,IAACc,EAAAA,eAAA,CACA,SAAWpB,EACX,sBAAqB,EAAA,CAAA,EAEpBJ,GAAOU,EAAAA,IAACe,EAAAA,gBAAA,CAAgB,UAAYzB,CAAA,CAAM,EAC1CZ,SAAcsC,EAAAA,gBAAA,EAAgB,EAChChB,MAACiB,EAAAA,SAAoB,MAAA7B,EAAgB,EACnCC,GAAaW,EAAAA,IAACkB,kBAAA,CAAe,UAAA7B,CAAA,CAAwB,CAAA,CAAA,CACxD,CAAA,CAAA,CAGH,CACD,EACAjB,EAAY,YAAc"}