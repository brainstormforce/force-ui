"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const f=require("@lexical/react/LexicalComposerContext"),S=require("@lexical/selection"),C=require("@lexical/utils"),s=require("lexical"),g=require("react");function u(n){const r=s.$getRoot().getTextContentSize();let o=0;const e=n._nodeMap;for(const[,i]of e)i.__type==="mention"&&(o+=1);return r+o}function a({maxLength:n}){const[t]=f.useLexicalComposerContext();return g.useEffect(()=>{let r=null;return t.registerNodeTransform(s.RootNode,()=>{const o=s.$getSelection();if(!s.$isRangeSelection(o)||!o.isCollapsed())return;const e=t.getEditorState(),i=e.read(()=>u(e)),c=u(e);if(i!==c){const l=c-n,d=o.anchor;l>0&&(i===n&&r!==e?(r=e,C.$restoreEditorState(t,e)):S.$trimTextContentFromAnchor(t,d,l))}})},[t,n]),null}exports.MaxLengthPlugin=a;exports.default=a;
//# sourceMappingURL=character-limit.cjs.js.map
