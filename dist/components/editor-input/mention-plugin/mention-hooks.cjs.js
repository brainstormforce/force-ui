"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const a=require("react");class y{value;constructor(e){this.value=e}}function M(r,e,s="name"){const[d,u]=a.useState([]),t=a.useRef(new WeakMap),c=a.useRef(new Map),k=a.useRef(r);return a.useEffect(()=>{k.current!==r&&(t.current=new WeakMap,c.current.clear(),k.current=r,e!==null&&w.search(r,e,l=>{u(l)},s))},[r,s,e]),a.useEffect(()=>{if(e===null){u([]);return}const l=t.current,f=c.current;let o=f.get(e);o||(o=new y(e),f.set(e,o));const i=l.get(o);if(i!==null){if(i!==void 0){u(i);return}if(l.set(o,null),w.search(r,e,n=>{const v=f.get(e);v&&(l.set(v,n),u(n))},s),f.size>100){const n=Array.from(f.entries()).slice(-50);c.current=new Map(n)}}},[e,r,s]),d}const w={search(r,e,s,d){setTimeout(()=>{if(!Array.isArray(r))return[];const u=r.filter(t=>{if(typeof t=="string")return t.toLowerCase().includes(e.toLowerCase());const c=t?.[d]?.toString();return c?c.toLowerCase().includes(e.toLowerCase()):!1});s(u)},500)}};exports.default=M;
//# sourceMappingURL=mention-hooks.cjs.js.map
