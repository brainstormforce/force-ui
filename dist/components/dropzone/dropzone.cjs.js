"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("react/jsx-runtime"),c=require("react"),x=require("lucide-react"),s=require("../../utilities/functions.cjs.js"),q=require("nanoid"),P=require("../loader/loader.cjs.js"),j=c.createContext(null),R=()=>c.useContext(j),v=()=>{const{file:t,removeFile:l,isLoading:a,error:n,errorText:o}=R(),r=c.useMemo(()=>e.jsx("span",{className:"inline-flex self-start p-0.5",children:e.jsx(x.File,{className:"size-5 text-icon-primary"})}),[t]);return t?e.jsx("div",{className:s.cn("border border-solid border-transparent flex items-start justify-between rounded mt-2 bg-field-primary-background p-3 gap-3",n&&"border-alert-border-danger bg-alert-background-danger"),children:e.jsxs("div",{className:"flex items-center gap-3 w-full",children:[a&&r,!a&&(t.type.startsWith("image/")?e.jsx("div",{className:s.cn("size-10 rounded-sm flex items-center justify-center shrink-0",n&&"bg-gray-200 "),children:n?e.jsx(x.ImageOff,{className:"size-6 text-field-helper"}):e.jsx("img",{src:URL.createObjectURL(t),alt:"Preview",className:"w-full h-10 object-contain"})}):r),e.jsxs("div",{className:"text-left flex flex-col gap-1 w-[calc(100%_-_5.5rem)]",children:[e.jsx("span",{className:"text-sm font-medium text-field-label truncate",children:a?"Loading...":t.name}),!a&&e.jsx("span",{className:s.cn("text-xs text-field-helper",n&&"text-support-error"),children:n?o:s.formatFileSize(t.size)})]}),a?e.jsx("span",{className:"inline-flex ml-auto p-0.5",children:e.jsx(P.Loader,{className:"inline-flex"})}):e.jsx("button",{onClick:l,className:"inline-flex cursor-pointer bg-transparent border-0 p-1 my-0 ml-auto mr-0 ring-0 focus:outline-none self-start",children:e.jsx(x.Trash,{className:"size-4 text-support-error"})})]})}):null},h=({onFileUpload:t,inlineIcon:l=!1,label:a="Drag and drop or browse files",helpText:n="Help Text",size:o="sm",disabled:r=!1,error:N=!1,errorText:z="Upload failed, please try again."})=>{const[D,u]=c.useState(!1),[y,p]=c.useState(null),[w,m]=c.useState(!1),F=i=>{if(r)return;u(!0),i.preventDefault(),i.stopPropagation(),m(!1);const d=i.dataTransfer.files[0];d&&(p(d),t&&t(d)),u(!1)},C=i=>{r||(i.preventDefault(),m(!0))},L=()=>{r||m(!1)},T=i=>{if(r)return;u(!0);const d=i.target.files;if(!d)return;const g=d[0];g&&(p(g),t&&t(g)),u(!1)},k=()=>{p(null)},f={sm:{label:"text-sm",helpText:"text-xs",icon:"size-5",padding:l?"p-3":"p-5",gap:"gap-2.5"},md:{label:"text-sm",helpText:"text-xs",icon:"size-5",padding:l?"p-4":"p-6",gap:"gap-3"},lg:{label:"text-base",helpText:"text-sm",icon:"size-6",padding:l?"p-4":"p-6",gap:"gap-3"}},b=c.useRef(`fui-file-upload-${q.nanoid()}`);return e.jsx(j.Provider,{value:{file:y,removeFile:k,isLoading:D,error:N,errorText:z},children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:b.current,children:e.jsxs("div",{className:s.cn("min-w-80 cursor-pointer mx-auto border-dashed border rounded-md text-center hover:border-field-dropzone-color hover:bg-field-dropzone-background-hover focus:outline-none focus:ring focus:ring-toggle-on focus:ring-offset-2 transition duration-200 ease-in-out",w?"border-field-dropzone-color bg-field-dropzone-background-hover":"border-field-border",r&&"border-field-border bg-field-background-disabled cursor-not-allowed hover:border-field-border",f[o].padding),onDragOver:C,onDragLeave:L,onDrop:F,children:[e.jsxs("div",{className:s.cn("flex flex-col items-center justify-center",l&&`flex-row items-start ${f[o].gap}`),children:[e.jsx("div",{children:e.jsx(x.CloudUpload,{className:s.cn("text-field-dropzone-color size-6",f[o].icon,r&&"text-field-color-disabled")})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:s.cn("mt-1 text-center font-medium text-field-label",l&&"text-left mt-0",f[o].label,r&&"text-field-color-disabled"),children:a}),n&&e.jsx("span",{className:s.cn("mt-1 text-center font-medium text-field-helper",l&&"text-left",f[o].helpText,r&&"text-field-color-disabled"),children:n})]})]}),e.jsx("input",{id:b.current,type:"file",className:"sr-only",onChange:T,disabled:r})]})}),e.jsx(v,{})]})})};h.displayName="Dropzone";exports.Dropzone=h;exports.FilePreview=v;exports.default=h;
//# sourceMappingURL=dropzone.cjs.js.map
