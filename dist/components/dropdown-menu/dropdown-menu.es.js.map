{"version":3,"file":"dropdown-menu.es.js","sources":["../../../src/components/dropdown-menu/dropdown-menu.tsx"],"sourcesContent":["import React, {\n\tuseState,\n\tcreateContext,\n\tuseContext,\n\tcloneElement,\n\tFragment,\n\tisValidElement,\n\ttype ReactElement,\n} from 'react';\nimport {\n\tuseFloating,\n\tautoUpdate,\n\toffset,\n\tflip,\n\tshift,\n\tuseClick,\n\tuseDismiss,\n\tuseRole,\n\tFloatingPortal,\n\tuseInteractions,\n\tuseTransitionStyles,\n\ttype UseFloatingReturn,\n\ttype UseInteractionsReturn,\n} from '@floating-ui/react';\nimport { callAll, cn } from '@/utilities/functions';\nimport Menu from '../menu-item/menu-item';\nimport {\n\tAdditionalProps,\n\tDropdownCommonProps,\n\tDropdownMenuContentWrapperProps,\n\tDropdownMenuItemProps,\n\tDropdownMenuListProps,\n\tDropdownMenuProps,\n\tDropdownMenuSeparatorProps,\n\tDropdownPortalProps,\n\tHandleClose,\n} from './dropdown-types';\n\nconst DropdownMenuContext = createContext<Record<string, unknown>>( {} );\nconst useDropdownMenuContext = () => useContext( DropdownMenuContext );\n\nexport const DropdownMenu = ( {\n\tplacement = 'bottom',\n\toffset: offsetValue = 10,\n\tboundary = 'clippingAncestors',\n\tchildren,\n\tclassName,\n}: DropdownMenuProps ) => {\n\tconst [ isOpen, setIsOpen ] = useState( false );\n\n\tconst { refs, floatingStyles, context } = useFloating( {\n\t\topen: isOpen,\n\t\tonOpenChange: setIsOpen,\n\t\tplacement,\n\t\tstrategy: 'fixed',\n\t\tmiddleware: [\n\t\t\toffset( offsetValue ),\n\t\t\tflip( { boundary } ),\n\t\t\tshift( { boundary } ),\n\t\t],\n\t\twhileElementsMounted: autoUpdate,\n\t} );\n\n\tconst click = useClick( context );\n\tconst dismiss = useDismiss( context );\n\tconst role = useRole( context, { role: 'menu' } );\n\n\tconst { getReferenceProps, getFloatingProps } = useInteractions( [\n\t\tclick,\n\t\tdismiss,\n\t\trole,\n\t] );\n\n\tconst { isMounted, styles } = useTransitionStyles( context, {\n\t\tduration: 150,\n\t\tinitial: { opacity: 0, scale: 0.95 },\n\t\topen: { opacity: 1, scale: 1 },\n\t\tclose: { opacity: 0, scale: 0.95 },\n\t} );\n\n\tconst toggleMenu = () => setIsOpen( ( prev ) => ! prev );\n\n\tconst handleClose = () => setIsOpen( false );\n\n\treturn (\n\t\t<DropdownMenuContext.Provider\n\t\t\tvalue={ {\n\t\t\t\trefs,\n\t\t\t\thandleClose,\n\t\t\t\tisMounted,\n\t\t\t\tstyles,\n\t\t\t\tfloatingStyles,\n\t\t\t\tgetFloatingProps,\n\t\t\t} }\n\t\t>\n\t\t\t<div className={ cn( 'relative inline-block', className ) }>\n\t\t\t\t{ React.Children.map( children, ( child ) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tReact.isValidElement( child ) &&\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tchild as ReactElement & {\n\t\t\t\t\t\t\t\ttype: { displayName: string };\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)?.type?.displayName === 'DropdownMenu.Trigger'\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn cloneElement( child as ReactElement, {\n\t\t\t\t\t\t\tref: refs.setReference,\n\t\t\t\t\t\t\tonClick: toggleMenu,\n\t\t\t\t\t\t\t...getReferenceProps(),\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t} ) }\n\n\t\t\t\t{ React.Children.toArray( children )\n\t\t\t\t\t.filter(\n\t\t\t\t\t\t( child ): child is React.ReactElement =>\n\t\t\t\t\t\t\tReact.isValidElement( child ) &&\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t'DropdownMenu.Portal',\n\t\t\t\t\t\t\t\t'DropdownMenu.ContentWrapper',\n\t\t\t\t\t\t\t].includes(\n\t\t\t\t\t\t\t\t( child.type as { displayName?: string } )\n\t\t\t\t\t\t\t\t\t.displayName || ''\n\t\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t.map( ( child ) => child ) }\n\t\t\t</div>\n\t\t</DropdownMenuContext.Provider>\n\t);\n};\n\nDropdownMenu.displayName = 'DropdownMenu';\n\nexport const DropdownMenuContentWrapper = ( {\n\tchildren,\n\tclassName,\n}: DropdownMenuContentWrapperProps ) => {\n\tconst { refs, floatingStyles, getFloatingProps, isMounted, styles } =\n\t\tuseDropdownMenuContext() as {\n\t\t\trefs: UseFloatingReturn['refs'];\n\t\t\tfloatingStyles: UseFloatingReturn['floatingStyles'];\n\t\t\tgetFloatingProps: UseInteractionsReturn['getFloatingProps'];\n\t\t\tisMounted: boolean;\n\t\t\tstyles: React.CSSProperties;\n\t\t};\n\n\treturn (\n\t\tisMounted && (\n\t\t\t<div\n\t\t\t\tref={ refs.setFloating }\n\t\t\t\tclassName={ className }\n\t\t\t\tstyle={ {\n\t\t\t\t\t...floatingStyles!,\n\t\t\t\t\t...styles!,\n\t\t\t\t} }\n\t\t\t\t{ ...getFloatingProps() }\n\t\t\t>\n\t\t\t\t{ React.Children.map( children, ( child ) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tchild as ReactElement & {\n\t\t\t\t\t\t\t\ttype?: { displayName: string };\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)?.type?.displayName === 'DropdownMenu.Content'\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn child;\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t} ) }\n\t\t\t</div>\n\t\t)\n\t);\n};\n\nDropdownMenuContentWrapper.displayName = 'DropdownMenu.ContentWrapper';\n\nexport const DropdownMenuPortal = ( {\n\tchildren,\n\troot,\n\tid,\n}: DropdownPortalProps ) => {\n\treturn (\n\t\t<FloatingPortal id={ id } root={ root }>\n\t\t\t{ children }\n\t\t</FloatingPortal>\n\t);\n};\n\nDropdownMenuPortal.displayName = 'DropdownMenu.Portal';\n\nexport const DropdownMenuTrigger = React.forwardRef<\n\tHTMLDivElement,\n\tDropdownCommonProps\n>( ( { children, className, ...props }: DropdownCommonProps, ref ) => {\n\tif ( isValidElement( children ) ) {\n\t\treturn React.cloneElement( children as React.ReactElement, {\n\t\t\tclassName: cn( className, children.props.className ),\n\t\t\tref,\n\t\t\t...props,\n\t\t} );\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tref={ ref }\n\t\t\tclassName={ cn( 'cursor-pointer', className ) }\n\t\t\trole=\"button\"\n\t\t\ttabIndex={ 0 }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ children }\n\t\t</div>\n\t);\n} );\n\nDropdownMenuTrigger.displayName = 'DropdownMenu.Trigger';\n\nexport const DropdownMenuContent = ( {\n\tchildren,\n\tclassName,\n\t...props\n}: DropdownCommonProps & AdditionalProps ) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={ cn(\n\t\t\t\t'border border-solid border-border-subtle rounded-md shadow-lg overflow-hidden',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t>\n\t\t\t<Menu { ...props }>{ children }</Menu>\n\t\t</div>\n\t);\n};\nDropdownMenuContent.displayName = 'DropdownMenu.Content';\n\nexport const DropdownMenuList = ( props: DropdownMenuListProps ) => {\n\treturn <Menu.List { ...props } />;\n};\n\nDropdownMenuList.displayName = 'DropdownMenu.List';\n\nexport const DropdownMenuItem = ( {\n\tchildren,\n\tas: Tag = Menu.Item,\n\t...props\n}: DropdownMenuItemProps ) => {\n\tconst { handleClose } = useDropdownMenuContext();\n\n\tif ( ! children ) {\n\t\treturn null;\n\t}\n\n\tif ( Tag === Fragment && isValidElement( children ) ) {\n\t\treturn cloneElement( children as React.ReactElement, {\n\t\t\tonClick: callAll(\n\t\t\t\t( children as React.ReactElement ).props?.onClick,\n\t\t\t\thandleClose as HandleClose\n\t\t\t),\n\t\t} );\n\t}\n\n\treturn (\n\t\t<Tag\n\t\t\t{ ...props }\n\t\t\tclassName={ cn( 'px-2', props.className ) }\n\t\t\tonClick={ callAll( props.onClick!, handleClose as HandleClose ) }\n\t\t>\n\t\t\t{ children }\n\t\t</Tag>\n\t);\n};\n\nDropdownMenuItem.displayName = 'DropdownMenu.Item';\n\nexport const DropdownMenuSeparator = ( props: DropdownMenuSeparatorProps ) => {\n\treturn <Menu.Separator { ...props } />;\n};\n\nDropdownMenuSeparator.displayName = 'DropdownMenu.Separator';\n\nDropdownMenu.Trigger = DropdownMenuTrigger;\nDropdownMenu.Content = DropdownMenuContent;\nDropdownMenu.List = DropdownMenuList;\nDropdownMenu.Item = DropdownMenuItem;\nDropdownMenu.Separator = DropdownMenuSeparator;\nDropdownMenu.Portal = DropdownMenuPortal;\nDropdownMenu.ContentWrapper = DropdownMenuContentWrapper;\n\nexport default DropdownMenu;\n"],"names":["DropdownMenuContext","createContext","useDropdownMenuContext","useContext","DropdownMenu","placement","offsetValue","boundary","children","className","isOpen","setIsOpen","useState","refs","floatingStyles","context","useFloating","offset","flip","shift","autoUpdate","click","useClick","dismiss","useDismiss","role","useRole","getReferenceProps","getFloatingProps","useInteractions","isMounted","styles","useTransitionStyles","toggleMenu","prev","handleClose","jsx","cn","React","child","cloneElement","DropdownMenuContentWrapper","DropdownMenuPortal","root","id","FloatingPortal","DropdownMenuTrigger","props","ref","isValidElement","DropdownMenuContent","Menu","DropdownMenuList","DropdownMenuItem","Tag","Fragment","callAll","DropdownMenuSeparator"],"mappings":"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"}