{"version":3,"file":"dropdown-menu.es.js","sources":["../../../src/components/dropdown-menu/dropdown-menu.tsx"],"sourcesContent":["import React, {\n\tuseState,\n\tcreateContext,\n\tuseContext,\n\tcloneElement,\n\tFragment,\n\tisValidElement,\n\ttype ReactElement,\n} from 'react';\nimport {\n\tuseFloating,\n\tautoUpdate,\n\toffset,\n\tflip,\n\tshift,\n\tuseClick,\n\tuseDismiss,\n\tuseRole,\n\tFloatingPortal,\n\tuseInteractions,\n\tuseTransitionStyles,\n\ttype UseFloatingReturn,\n\ttype UseInteractionsReturn,\n} from '@floating-ui/react';\nimport { callAll, cn } from '@/utilities/functions';\nimport Menu from '../menu-item/menu-item';\nimport {\n\tAdditionalProps,\n\tDropdownCommonProps,\n\tDropdownMenuItemProps,\n\tDropdownMenuListProps,\n\tDropdownMenuProps,\n\tDropdownMenuSeparatorProps,\n\tDropdownPortalProps,\n\tHandleClose,\n} from './dropdown-types';\n\nconst DropdownMenuContext = createContext<Record<string, unknown>>( {} );\nconst useDropdownMenuContext = () => useContext( DropdownMenuContext );\n\nexport const DropdownMenu = ( {\n\tplacement = 'bottom',\n\toffset: offsetValue = 10,\n\tboundary = 'clippingAncestors',\n\tchildren,\n\tclassName,\n}: DropdownMenuProps ) => {\n\tconst [ isOpen, setIsOpen ] = useState( false );\n\n\tconst { refs, floatingStyles, context } = useFloating( {\n\t\topen: isOpen,\n\t\tonOpenChange: setIsOpen,\n\t\tplacement,\n\t\tstrategy: 'absolute',\n\t\tmiddleware: [\n\t\t\toffset( offsetValue ),\n\t\t\tflip( { boundary } ),\n\t\t\tshift( { boundary } ),\n\t\t],\n\t\twhileElementsMounted: autoUpdate,\n\t} );\n\n\tconst click = useClick( context );\n\tconst dismiss = useDismiss( context );\n\tconst role = useRole( context, { role: 'menu' } );\n\n\tconst { getReferenceProps, getFloatingProps } = useInteractions( [\n\t\tclick,\n\t\tdismiss,\n\t\trole,\n\t] );\n\n\tconst { isMounted, styles } = useTransitionStyles( context, {\n\t\tduration: 150,\n\t\tinitial: { opacity: 0, scale: 0.95 },\n\t\topen: { opacity: 1, scale: 1 },\n\t\tclose: { opacity: 0, scale: 0.95 },\n\t} );\n\n\tconst toggleMenu = () => setIsOpen( ( prev ) => ! prev );\n\n\tconst handleClose = () => setIsOpen( false );\n\n\treturn (\n\t\t<DropdownMenuContext.Provider\n\t\t\tvalue={ {\n\t\t\t\trefs,\n\t\t\t\thandleClose,\n\t\t\t\tisMounted,\n\t\t\t\tstyles,\n\t\t\t\tfloatingStyles,\n\t\t\t\tgetFloatingProps,\n\t\t\t} }\n\t\t>\n\t\t\t<div className={ cn( 'relative inline-block', className ) }>\n\t\t\t\t{ React.Children.map( children, ( child ) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tReact.isValidElement( child ) &&\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tchild as ReactElement & {\n\t\t\t\t\t\t\t\ttype: { displayName: string };\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)?.type?.displayName === 'DropdownMenu.Trigger'\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn cloneElement( child as ReactElement, {\n\t\t\t\t\t\t\tref: refs.setReference,\n\t\t\t\t\t\t\tonClick: toggleMenu,\n\t\t\t\t\t\t\t...getReferenceProps(),\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t} ) }\n\n\t\t\t\t{ React.Children.map( children, ( child ) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tReact.isValidElement( child ) &&\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tchild as ReactElement & {\n\t\t\t\t\t\t\t\ttype: { displayName: string };\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)?.type?.displayName === 'DropdownMenu.Portal'\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn child;\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t} ) }\n\t\t\t</div>\n\t\t</DropdownMenuContext.Provider>\n\t);\n};\n\nDropdownMenu.displayName = 'DropdownMenu';\n\nexport const DropdownMenuPortal = ( {\n\tchildren,\n\tclassName,\n\troot,\n\tid,\n}: DropdownPortalProps ) => {\n\tconst { refs, floatingStyles, getFloatingProps, isMounted, styles } =\n\t\tuseDropdownMenuContext() as {\n\t\t\trefs: UseFloatingReturn['refs'];\n\t\t\tfloatingStyles: UseFloatingReturn['floatingStyles'];\n\t\t\tgetFloatingProps: UseInteractionsReturn['getFloatingProps'];\n\t\t\tisMounted: boolean;\n\t\t\tstyles: React.CSSProperties;\n\t\t};\n\n\treturn (\n\t\tisMounted && (\n\t\t\t<FloatingPortal id={ id } root={ root }>\n\t\t\t\t<div\n\t\t\t\t\tref={ refs.setFloating }\n\t\t\t\t\tclassName={ className }\n\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t...floatingStyles!,\n\t\t\t\t\t\t...styles!,\n\t\t\t\t\t} }\n\t\t\t\t\t{ ...getFloatingProps() }\n\t\t\t\t>\n\t\t\t\t\t{ React.Children.map( children, ( child ) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tchild as ReactElement & {\n\t\t\t\t\t\t\t\t\ttype?: { displayName: string };\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)?.type?.displayName === 'DropdownMenu.Content'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn child;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t} ) }\n\t\t\t\t</div>\n\t\t\t</FloatingPortal>\n\t\t)\n\t);\n};\n\nDropdownMenuPortal.displayName = 'DropdownMenu.Portal';\n\nexport const DropdownMenuTrigger = React.forwardRef<\n\tHTMLDivElement,\n\tDropdownCommonProps\n>( ( { children, className, ...props }: DropdownCommonProps, ref ) => {\n\tif ( isValidElement( children ) ) {\n\t\treturn React.cloneElement( children as React.ReactElement, {\n\t\t\tclassName: cn( className, children.props.className ),\n\t\t\tref,\n\t\t\t...props,\n\t\t} );\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tref={ ref }\n\t\t\tclassName={ cn( 'cursor-pointer', className ) }\n\t\t\trole=\"button\"\n\t\t\ttabIndex={ 0 }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ children }\n\t\t</div>\n\t);\n} );\n\nDropdownMenuTrigger.displayName = 'DropdownMenu.Trigger';\n\nexport const DropdownMenuContent = ( {\n\tchildren,\n\tclassName,\n\t...props\n}: DropdownCommonProps & AdditionalProps ) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={ cn(\n\t\t\t\t'border border-solid border-border-subtle rounded-md shadow-lg overflow-hidden',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t>\n\t\t\t<Menu { ...props }>{ children }</Menu>\n\t\t</div>\n\t);\n};\nDropdownMenuContent.displayName = 'DropdownMenu.Content';\n\nexport const DropdownMenuList = ( props: DropdownMenuListProps ) => {\n\treturn <Menu.List { ...props } />;\n};\n\nDropdownMenuList.displayName = 'DropdownMenu.List';\n\nexport const DropdownMenuItem = ( {\n\tchildren,\n\tas: Tag = Menu.Item,\n\t...props\n}: DropdownMenuItemProps ) => {\n\tconst { handleClose } = useDropdownMenuContext();\n\n\tif ( ! children ) {\n\t\treturn null;\n\t}\n\n\tif ( Tag === Fragment && isValidElement( children ) ) {\n\t\treturn cloneElement( children as React.ReactElement, {\n\t\t\tonClick: callAll(\n\t\t\t\t( children as React.ReactElement ).props?.onClick,\n\t\t\t\thandleClose as HandleClose\n\t\t\t),\n\t\t} );\n\t}\n\n\treturn (\n\t\t<Tag\n\t\t\t{ ...props }\n\t\t\tclassName={ cn( 'px-2', props.className ) }\n\t\t\tonClick={ callAll( props.onClick!, handleClose as HandleClose ) }\n\t\t>\n\t\t\t{ children }\n\t\t</Tag>\n\t);\n};\n\nDropdownMenuItem.displayName = 'DropdownMenu.Item';\n\nexport const DropdownMenuSeparator = ( props: DropdownMenuSeparatorProps ) => {\n\treturn <Menu.Separator { ...props } />;\n};\n\nDropdownMenuSeparator.displayName = 'DropdownMenu.Separator';\n\nDropdownMenu.Trigger = DropdownMenuTrigger;\nDropdownMenu.Content = DropdownMenuContent;\nDropdownMenu.List = DropdownMenuList;\nDropdownMenu.Item = DropdownMenuItem;\nDropdownMenu.Separator = DropdownMenuSeparator;\nDropdownMenu.Portal = DropdownMenuPortal;\n\nexport default DropdownMenu;\n"],"names":["DropdownMenuContext","createContext","useDropdownMenuContext","useContext","DropdownMenu","placement","offsetValue","boundary","children","className","isOpen","setIsOpen","useState","refs","floatingStyles","context","useFloating","offset","flip","shift","autoUpdate","click","useClick","dismiss","useDismiss","role","useRole","getReferenceProps","getFloatingProps","useInteractions","isMounted","styles","useTransitionStyles","toggleMenu","prev","handleClose","jsx","cn","React","child","cloneElement","DropdownMenuPortal","root","id","FloatingPortal","DropdownMenuTrigger","props","ref","isValidElement","DropdownMenuContent","Menu","DropdownMenuList","DropdownMenuItem","Tag","Fragment","callAll","DropdownMenuSeparator"],"mappings":"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"}