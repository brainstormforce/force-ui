# Codebase Map

This guide provides a folder-by-folder tour of the Force UI codebase, explaining what each directory contains and how files are organized.

## Root Directory Structure

```
force-ui/
├─ .github/              # GitHub-specific files (workflows, templates)
├─ .storybook/           # Storybook configuration
├─ bin/                  # Build and release scripts
├─ dist/                 # Compiled output (git-ignored)
├─ internal-docs/        # Internal documentation (this file!)
├─ node_modules/         # npm dependencies (git-ignored)
├─ src/                  # Source code ⭐ MAIN DEVELOPMENT FOLDER
├─ .distignore           # Files excluded from WordPress.org release
├─ .eslintrc.cjs         # ESLint configuration
├─ .gitignore            # Git ignore rules
├─ .prettierrc.mjs       # Prettier formatting rules
├─ changelog.txt         # Release changelog
├─ gulpfile.js           # Gulp automation tasks
├─ package.json          # npm package configuration
├─ postcss.config.cjs    # PostCSS configuration
├─ README.md             # Public-facing README
├─ tsconfig.json         # TypeScript configuration (references)
├─ tsconfig.app.json     # TypeScript config for app code
├─ tsconfig.node.json    # TypeScript config for build tools
└─ vite.config.ts        # Vite build configuration
```

---

## `.github/` - GitHub Configuration

**Purpose:** GitHub-specific files for workflows, issue templates, and contribution guidelines.

```
.github/
├─ workflows/
│  ├─ chromatic.yml              # Visual regression testing
│  ├─ code-analysis.yml          # ESLint/Prettier checks
│  ├─ code-reviewer.yml          # Automated code review
│  ├─ storybook-deployment.yml   # Deploy Storybook to gh-pages
│  ├─ storybook-tests.yml        # Run Storybook tests
│  └─ tag-release.yml            # Create GitHub releases
├─ ISSUE_TEMPLATE/
│  ├─ Bug_report.md              # Bug report template
│  └─ Feature_request.md         # Feature request template
├─ CODE_OF_CONDUCT.md            # Community code of conduct
├─ CONTRIBUTING.md               # Contribution guidelines
├─ PHILOSOPHY.md                 # Product philosophy ⭐ READ THIS
├─ PULL_REQUEST_TEMPLATE.md      # PR template
└─ dependabot.yml                # Automated dependency updates
```

**Key Files:**
- **PHILOSOPHY.md** - The "why" behind Force UI's design decisions
- **workflows/*.yml** - CI/CD automation (tests, builds, deployments)

---

## `.storybook/` - Storybook Configuration

**Purpose:** Configuration for Storybook, Force UI's component documentation and testing system.

```
.storybook/
├─ main.ts               # Storybook configuration (addons, framework)
├─ preview.tsx           # Global decorators and parameters
├─ preview-head.html     # HTML injected into Storybook <head>
└─ test-runner.js        # Playwright test runner config
```

**Key Files:**
- **main.ts** - Defines Storybook addons (a11y, interactions, essentials)
- **preview.tsx** - Global wrappers (e.g., Tailwind CSS scope)
- **test-runner.js** - Configures automated accessibility testing

**Usage:**
```bash
npm run storybook      # Start Storybook dev server (port 6006)
npm test               # Run Storybook tests with Playwright
```

---

## `bin/` - Build and Release Scripts

**Purpose:** Shell scripts for building and releasing Force UI.

```
bin/
├─ build.sh             # Creates force-ui.zip for distribution
└─ release.sh           # Full release process (unused in current workflow)
```

**Key Files:**
- **build.sh** - Packages `dist/`, `package.json`, `version.json`, `changelog.txt` into a ZIP

**Usage:**
```bash
npm run package        # Runs bin/build.sh
```

---

## `dist/` - Compiled Output

**Purpose:** Build artifacts (generated by `npm run build`).

```
dist/
├─ force-ui.es.js       # ESM entry point
├─ force-ui.cjs.js      # CommonJS entry point
├─ force-ui.d.ts        # TypeScript declarations (entry)
├─ withTW.es.js         # Tailwind wrapper (ESM)
├─ withTW.cjs.js        # Tailwind wrapper (CJS)
├─ withTW.d.ts          # Tailwind wrapper types
├─ components/          # Individual component files
│  ├─ button/
│  │  ├─ button.es.js
│  │  ├─ button.cjs.js
│  │  └─ button.d.ts
│  └─ ... (all other components)
├─ utilities/           # Utility functions
└─ ... (mirrors src/ structure)
```

**Important:**
- This folder is **git-ignored** and **generated by builds**
- Do NOT edit files here - edit `src/` instead
- Published to npm/GitHub releases

---

## `internal-docs/` - Internal Documentation

**Purpose:** Developer-focused documentation (this folder!).

```
internal-docs/
├─ README.md            # Documentation index
├─ product-vision.md    # Product goals and roadmap
├─ architecture.md      # High-level architecture
├─ codebase-map.md      # This file!
├─ apis.md              # Component APIs and usage
├─ coding-standards.md  # Code style guidelines
├─ ui-and-copy.md       # Design and UX principles
├─ onboarding.md        # Developer onboarding paths
├─ ai-agent-guide.md    # AI coding agent instructions
├─ troubleshooting.md   # Common issues
├─ faq.md               # Frequently asked questions
├─ glossary.md          # Technical terminology
└─ maintenance.md       # Doc update procedures
```

**Important:**
- This folder is **excluded from releases** via `.distignore`
- For internal development only

---

## `src/` - Source Code ⭐

**Purpose:** The main development folder containing all component source code.

### Top-Level Structure

```
src/
├─ components/          # UI components (40+ components)
├─ hoc/                 # Higher-order components
├─ templates/           # Full-page templates
├─ theme/               # Theme utilities
├─ ui/                  # UI primitives (icons)
├─ utilities/           # Helper functions
├─ index.ts             # Main entry point
├─ settings.js          # Global settings
├─ tailwind.css         # Tailwind imports
└─ vite-env.d.ts        # Vite type declarations
```

### `src/components/` - UI Components

**Purpose:** Reusable React components.

Each component follows this structure:

```
src/components/button/
├─ button.tsx           # Component implementation
├─ button.stories.tsx   # Storybook documentation
├─ index.ts             # Export (default export)
└─ readme.md           # Component-specific docs (optional)
```

**Component Categories:**

| Category | Components |
|----------|------------|
| **Form Controls** | Button, Input, Checkbox, RadioButton, Select, Switch, TextArea, EditorInput, Dropzone, DatePicker |
| **Layout** | Container, Sidebar, Topbar, Drawer, HamburgerMenu |
| **Feedback** | Alert, Dialog, Loader, ProgressBar, ProgressSteps, Skeleton, Toaster (Toast) |
| **Data Display** | Table, Badge, Avatar, BarChart, LineChart, PieChart, AreaChart, FilePreview |
| **Navigation** | Breadcrumb, Tabs, Menu, Pagination, Dropdown Menu, SearchBox |
| **Typography** | Title, Label |
| **Misc** | Tooltip, ButtonGroup, Accordion, Cards |

**Key Files:**
- **components/index.ts** - Barrel export of all components
- **components/*/index.ts** - Individual component exports

### `src/hoc/` - Higher-Order Components

**Purpose:** React HOCs for cross-cutting concerns.

```
src/hoc/
├─ with-tooltip.tsx     # Add tooltip to any component
└─ ... (other HOCs)
```

**Usage:**
```tsx
import { withTooltip } from '@/hoc/with-tooltip';
const ButtonWithTooltip = withTooltip(Button);
```

### `src/templates/` - Full-Page Templates

**Purpose:** Pre-built page templates using Force UI components.

```
src/templates/
├─ admin-general-settings/       # Settings page template
├─ onboarding-connect/           # Onboarding flow template
├─ pricing/                      # Pricing page template
├─ import-progress/              # Progress indicator template
└─ ... (16+ templates)
```

**Usage:** Templates demonstrate how to compose components into complete UIs.

### `src/theme/` - Theme Utilities

**Purpose:** Theme-related utilities and helpers.

```
src/theme/
└─ ... (theme utilities)
```

### `src/ui/` - UI Primitives

**Purpose:** Low-level UI building blocks.

```
src/ui/
└─ icons.jsx            # Icon components (Lucide React icons)
```

**Usage:**
```tsx
import { BrandIcon } from '@/icons';
<BrandIcon className="w-6 h-6" />
```

### `src/utilities/` - Helper Functions

**Purpose:** Utility functions used across components.

```
src/utilities/
├─ withTW.js            # Tailwind config wrapper
├─ cn.ts                # Class name merger (tailwind-merge)
├─ index.ts             # Utility exports
└─ ... (other utilities)
```

**Key Files:**
- **withTW.js** - Wraps Tailwind config with Force UI's default theme
- **cn.ts** - Utility for merging Tailwind classes (using `clsx` + `tailwind-merge`)

**Usage:**
```tsx
import { cn } from '@/utilities';
const classes = cn('bg-blue-500', isDanger && 'bg-red-500');
```

### `src/index.ts` - Main Entry Point

**Purpose:** Library entry point that exports all public APIs.

```typescript
// src/index.ts
import './tailwind.css';
export * from './components';
```

**What it does:**
- Imports global Tailwind styles
- Re-exports all components from `src/components/index.ts`

### `src/tailwind.css` - Tailwind Imports

**Purpose:** Imports Tailwind's base, components, and utilities.

```css
@tailwind base;
@tailwind components;
@tailwind utilities;
```

---

## Configuration Files

### `package.json` - npm Package Configuration

**Purpose:** Defines the npm package, scripts, and dependencies.

**Key Sections:**
- **`name`**: `@bsf/force-ui`
- **`version`**: `1.5.0`
- **`main`**: `./dist/force-ui.cjs.js` (CJS entry)
- **`module`**: `./dist/force-ui.es.js` (ESM entry)
- **`types`**: `./dist/force-ui.d.ts` (TypeScript entry)
- **`exports`**: Defines subpath exports (e.g., `@bsf/force-ui/withTW`)

**Key Scripts:**
```json
{
  "build": "tsc -b && vite build",
  "start": "tsc -b && vite build -w",
  "storybook": "storybook dev -p 6006",
  "test": "test-storybook",
  "package": "sh bin/build.sh",
  "release": "npm run build && npm run package"
}
```

### `vite.config.ts` - Vite Build Configuration

**Purpose:** Configures Vite for library builds.

**Key Settings:**
- **Entry points**: `force-ui` (main), `withTW` (Tailwind wrapper)
- **Formats**: ESM + CJS with `preserveModules: true`
- **External**: React, React DOM, all dependencies
- **Plugins**: `vite-plugin-dts` (TypeScript declarations), `rollup-preserve-directives`
- **Path aliases**: `@/components`, `@/utilities`, `@/icons`, `@`

### `tsconfig.json` - TypeScript Configuration

**Purpose:** TypeScript project references.

**References:**
- `tsconfig.app.json` - Application code
- `tsconfig.node.json` - Build tools (Vite, Gulp)

### `.eslintrc.cjs` - ESLint Configuration

**Purpose:** Code quality and style enforcement.

**Extends:**
- `@wordpress/eslint-plugin`
- TypeScript ESLint rules
- React Hooks rules
- Storybook rules

### `.prettierrc.mjs` - Prettier Configuration

**Purpose:** Code formatting.

**Extends:** `@wordpress/prettier-config`

### `.distignore` - WordPress.org Exclusions

**Purpose:** Files excluded from WordPress.org releases.

**Excludes:**
- `.github/`, `src/`, `.storybook/`
- `node_modules/`, `bin/`, `tests/`
- Config files (`.eslintrc`, `vite.config.ts`, etc.)
- **`internal-docs/`** ⭐

---

## Finding Things

### "Where is the Button component?"

```
src/components/button/button.tsx
```

### "Where is the Tailwind theme config?"

```
src/utilities/withTW.js
```

### "Where are component exports?"

```
src/components/index.ts  ← Barrel export
src/index.ts             ← Library entry
```

### "Where are the Storybook stories?"

```
src/components/*/❋.stories.tsx
```

### "Where is the build output?"

```
dist/                    ← Generated by npm run build
```

### "Where are GitHub Actions workflows?"

```
.github/workflows/*.yml
```

### "Where is the release script?"

```
bin/build.sh
```

---

## Navigation Tips

### Adding a New Component

1. Create folder: `src/components/my-component/`
2. Create files:
   - `my-component.tsx` - Implementation
   - `my-component.stories.tsx` - Storybook docs
   - `index.ts` - Export
3. Add export to `src/components/index.ts`:
   ```ts
   export { default as MyComponent } from './my-component';
   ```

### Modifying an Existing Component

1. Find component: `src/components/{component-name}/`
2. Edit `.tsx` file
3. Update `.stories.tsx` if API changes
4. Run Storybook to test: `npm run storybook`

### Adding a Utility Function

1. Create or edit file in `src/utilities/`
2. Export from `src/utilities/index.ts`
3. Use path alias: `import { util } from '@/utilities'`

---

**Key Takeaway:** Force UI follows a modular, component-first structure with each component as an independent folder. Path aliases keep imports clean, and Vite preserves the module structure in the build output.

Last updated: February 2026
